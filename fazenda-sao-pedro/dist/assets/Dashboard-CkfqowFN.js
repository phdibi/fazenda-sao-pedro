import{r as f,R as Z,l as Se,m as Ce,A as Y,L as oe,n as se,j as s,o as Te,I as Re,V as ye,G as V,p as ae,q as K,t as Ie,B as X}from"./index-OnCL7RT-.js";import"./vendor-CMJYdXG8.js";function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ee.apply(null,arguments)}function ie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t,e){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},te(t,e)}function Ne(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,te(t,e)}var le=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function je(t,e){return!!(t===e||le(t)&&le(e))}function Me(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!je(t[n],e[n]))return!1;return!0}function J(t,e){e===void 0&&(e=Me);var n,o=[],a,S=!1;function p(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return S&&n===this&&e(d,o)||(a=t.apply(this,d),S=!0,n=this,o=d),a}return p}var Oe=typeof performance=="object"&&typeof performance.now=="function",ce=Oe?function(){return performance.now()}:function(){return Date.now()};function ue(t){cancelAnimationFrame(t.id)}function Le(t,e){var n=ce();function o(){ce()-n>=e?t.call(null):a.id=requestAnimationFrame(o)}var a={id:requestAnimationFrame(o)};return a}var Q=-1;function Ee(t){if(t===void 0&&(t=!1),Q===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),Q=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Q}var $=null;function de(t){if(t===void 0&&(t=!1),$===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var o=document.createElement("div"),a=o.style;return a.width="100px",a.height="100px",e.appendChild(o),document.body.appendChild(e),e.scrollLeft>0?$="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?$="negative":$="positive-ascending"),document.body.removeChild(e),$}return $}var We=150,He=function(e){var n=e.columnIndex;e.data;var o=e.rowIndex;return o+":"+n};function _e(t){var e,n=t.getColumnOffset,o=t.getColumnStartIndexForOffset,a=t.getColumnStopIndexForStartIndex,S=t.getColumnWidth,p=t.getEstimatedTotalHeight,d=t.getEstimatedTotalWidth,h=t.getOffsetForColumnAndAlignment,v=t.getOffsetForRowAndAlignment,N=t.getRowHeight,x=t.getRowOffset,m=t.getRowStartIndexForOffset,I=t.getRowStopIndexForStartIndex,W=t.initInstanceProps,k=t.shouldResetStyleCacheOnItemSizeChange,G=t.validateProps;return e=(function(H){Ne(U,H);function U(L){var r;return r=H.call(this,L)||this,r._instanceProps=W(r.props,ie(r)),r._resetIsScrollingTimeoutId=null,r._outerRef=void 0,r.state={instance:ie(r),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof r.props.initialScrollLeft=="number"?r.props.initialScrollLeft:0,scrollTop:typeof r.props.initialScrollTop=="number"?r.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},r._callOnItemsRendered=void 0,r._callOnItemsRendered=J(function(l,i,u,g,c,w,T,y){return r.props.onItemsRendered({overscanColumnStartIndex:l,overscanColumnStopIndex:i,overscanRowStartIndex:u,overscanRowStopIndex:g,visibleColumnStartIndex:c,visibleColumnStopIndex:w,visibleRowStartIndex:T,visibleRowStopIndex:y})}),r._callOnScroll=void 0,r._callOnScroll=J(function(l,i,u,g,c){return r.props.onScroll({horizontalScrollDirection:u,scrollLeft:l,scrollTop:i,verticalScrollDirection:g,scrollUpdateWasRequested:c})}),r._getItemStyle=void 0,r._getItemStyle=function(l,i){var u=r.props,g=u.columnWidth,c=u.direction,w=u.rowHeight,T=r._getItemStyleCache(k&&g,k&&c,k&&w),y=l+":"+i,R;if(T.hasOwnProperty(y))R=T[y];else{var C=n(r.props,i,r._instanceProps),b=c==="rtl";T[y]=R={position:"absolute",left:b?void 0:C,right:b?C:void 0,top:x(r.props,l,r._instanceProps),height:N(r.props,l,r._instanceProps),width:S(r.props,i,r._instanceProps)}}return R},r._getItemStyleCache=void 0,r._getItemStyleCache=J(function(l,i,u){return{}}),r._onScroll=function(l){var i=l.currentTarget,u=i.clientHeight,g=i.clientWidth,c=i.scrollLeft,w=i.scrollTop,T=i.scrollHeight,y=i.scrollWidth;r.setState(function(R){if(R.scrollLeft===c&&R.scrollTop===w)return null;var C=r.props.direction,b=c;if(C==="rtl")switch(de()){case"negative":b=-c;break;case"positive-descending":b=y-g-c;break}b=Math.max(0,Math.min(b,y-g));var M=Math.max(0,Math.min(w,T-u));return{isScrolling:!0,horizontalScrollDirection:R.scrollLeft<c?"forward":"backward",scrollLeft:b,scrollTop:M,verticalScrollDirection:R.scrollTop<w?"forward":"backward",scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._outerRefSetter=function(l){var i=r.props.outerRef;r._outerRef=l,typeof i=="function"?i(l):i!=null&&typeof i=="object"&&i.hasOwnProperty("current")&&(i.current=l)},r._resetIsScrollingDebounced=function(){r._resetIsScrollingTimeoutId!==null&&ue(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=Le(r._resetIsScrolling,We)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},function(){r._getItemStyleCache(-1)})},r}U.getDerivedStateFromProps=function(r,l){return De(r,l),G(r),null};var j=U.prototype;return j.scrollTo=function(r){var l=r.scrollLeft,i=r.scrollTop;l!==void 0&&(l=Math.max(0,l)),i!==void 0&&(i=Math.max(0,i)),this.setState(function(u){return l===void 0&&(l=u.scrollLeft),i===void 0&&(i=u.scrollTop),u.scrollLeft===l&&u.scrollTop===i?null:{horizontalScrollDirection:u.scrollLeft<l?"forward":"backward",scrollLeft:l,scrollTop:i,scrollUpdateWasRequested:!0,verticalScrollDirection:u.scrollTop<i?"forward":"backward"}},this._resetIsScrollingDebounced)},j.scrollToItem=function(r){var l=r.align,i=l===void 0?"auto":l,u=r.columnIndex,g=r.rowIndex,c=this.props,w=c.columnCount,T=c.height,y=c.rowCount,R=c.width,C=this.state,b=C.scrollLeft,M=C.scrollTop,_=Ee();u!==void 0&&(u=Math.max(0,Math.min(u,w-1))),g!==void 0&&(g=Math.max(0,Math.min(g,y-1)));var D=p(this.props,this._instanceProps),P=d(this.props,this._instanceProps),z=P>R?_:0,E=D>T?_:0;this.scrollTo({scrollLeft:u!==void 0?h(this.props,u,i,b,this._instanceProps,E):b,scrollTop:g!==void 0?v(this.props,g,i,M,this._instanceProps,z):M})},j.componentDidMount=function(){var r=this.props,l=r.initialScrollLeft,i=r.initialScrollTop;if(this._outerRef!=null){var u=this._outerRef;typeof l=="number"&&(u.scrollLeft=l),typeof i=="number"&&(u.scrollTop=i)}this._callPropsCallbacks()},j.componentDidUpdate=function(){var r=this.props.direction,l=this.state,i=l.scrollLeft,u=l.scrollTop,g=l.scrollUpdateWasRequested;if(g&&this._outerRef!=null){var c=this._outerRef;if(r==="rtl")switch(de()){case"negative":c.scrollLeft=-i;break;case"positive-ascending":c.scrollLeft=i;break;default:var w=c.clientWidth,T=c.scrollWidth;c.scrollLeft=T-w-i;break}else c.scrollLeft=Math.max(0,i);c.scrollTop=Math.max(0,u)}this._callPropsCallbacks()},j.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&ue(this._resetIsScrollingTimeoutId)},j.render=function(){var r=this.props,l=r.children,i=r.className,u=r.columnCount,g=r.direction,c=r.height,w=r.innerRef,T=r.innerElementType,y=r.innerTagName,R=r.itemData,C=r.itemKey,b=C===void 0?He:C,M=r.outerElementType,_=r.outerTagName,D=r.rowCount,P=r.style,z=r.useIsScrolling,E=r.width,A=this.state.isScrolling,O=this._getHorizontalRangeToRender(),F=O[0],ge=O[1],re=this._getVerticalRangeToRender(),ve=re[0],xe=re[1],ne=[];if(u>0&&D)for(var q=ve;q<=xe;q++)for(var B=F;B<=ge;B++)ne.push(f.createElement(l,{columnIndex:B,data:R,isScrolling:z?A:void 0,key:b({columnIndex:B,data:R,rowIndex:q}),rowIndex:q,style:this._getItemStyle(q,B)}));var we=p(this.props,this._instanceProps),be=d(this.props,this._instanceProps);return f.createElement(M||_||"div",{className:i,onScroll:this._onScroll,ref:this._outerRefSetter,style:ee({position:"relative",height:c,width:E,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:g},P)},f.createElement(T||y||"div",{children:ne,ref:w,style:{height:we,pointerEvents:A?"none":void 0,width:be}}))},j._callPropsCallbacks=function(){var r=this.props,l=r.columnCount,i=r.onItemsRendered,u=r.onScroll,g=r.rowCount;if(typeof i=="function"&&l>0&&g>0){var c=this._getHorizontalRangeToRender(),w=c[0],T=c[1],y=c[2],R=c[3],C=this._getVerticalRangeToRender(),b=C[0],M=C[1],_=C[2],D=C[3];this._callOnItemsRendered(w,T,b,M,y,R,_,D)}if(typeof u=="function"){var P=this.state,z=P.horizontalScrollDirection,E=P.scrollLeft,A=P.scrollTop,O=P.scrollUpdateWasRequested,F=P.verticalScrollDirection;this._callOnScroll(E,A,z,F,O)}},j._getHorizontalRangeToRender=function(){var r=this.props,l=r.columnCount,i=r.overscanColumnCount,u=r.overscanColumnsCount,g=r.overscanCount,c=r.rowCount,w=this.state,T=w.horizontalScrollDirection,y=w.isScrolling,R=w.scrollLeft,C=i||u||g||1;if(l===0||c===0)return[0,0,0,0];var b=o(this.props,R,this._instanceProps),M=a(this.props,b,R,this._instanceProps),_=!y||T==="backward"?Math.max(1,C):1,D=!y||T==="forward"?Math.max(1,C):1;return[Math.max(0,b-_),Math.max(0,Math.min(l-1,M+D)),b,M]},j._getVerticalRangeToRender=function(){var r=this.props,l=r.columnCount,i=r.overscanCount,u=r.overscanRowCount,g=r.overscanRowsCount,c=r.rowCount,w=this.state,T=w.isScrolling,y=w.verticalScrollDirection,R=w.scrollTop,C=u||g||i||1;if(l===0||c===0)return[0,0,0,0];var b=m(this.props,R,this._instanceProps),M=I(this.props,b,R,this._instanceProps),_=!T||y==="backward"?Math.max(1,C):1,D=!T||y==="forward"?Math.max(1,C):1;return[Math.max(0,b-_),Math.max(0,Math.min(c-1,M+D)),b,M]},U})(f.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var De=function(e,n){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,n.instance},Pe=_e({getColumnOffset:function(e,n){var o=e.columnWidth;return n*o},getColumnWidth:function(e,n){var o=e.columnWidth;return o},getRowOffset:function(e,n){var o=e.rowHeight;return n*o},getRowHeight:function(e,n){var o=e.rowHeight;return o},getEstimatedTotalHeight:function(e){var n=e.rowCount,o=e.rowHeight;return o*n},getEstimatedTotalWidth:function(e){var n=e.columnCount,o=e.columnWidth;return o*n},getOffsetForColumnAndAlignment:function(e,n,o,a,S,p){var d=e.columnCount,h=e.columnWidth,v=e.width,N=Math.max(0,d*h-v),x=Math.min(N,n*h),m=Math.max(0,n*h-v+p+h);switch(o==="smart"&&(a>=m-v&&a<=x+v?o="auto":o="center"),o){case"start":return x;case"end":return m;case"center":var I=Math.round(m+(x-m)/2);return I<Math.ceil(v/2)?0:I>N+Math.floor(v/2)?N:I;case"auto":default:return a>=m&&a<=x?a:m>x||a<m?m:x}},getOffsetForRowAndAlignment:function(e,n,o,a,S,p){var d=e.rowHeight,h=e.height,v=e.rowCount,N=Math.max(0,v*d-h),x=Math.min(N,n*d),m=Math.max(0,n*d-h+p+d);switch(o==="smart"&&(a>=m-h&&a<=x+h?o="auto":o="center"),o){case"start":return x;case"end":return m;case"center":var I=Math.round(m+(x-m)/2);return I<Math.ceil(h/2)?0:I>N+Math.floor(h/2)?N:I;case"auto":default:return a>=m&&a<=x?a:m>x||a<m?m:x}},getColumnStartIndexForOffset:function(e,n){var o=e.columnWidth,a=e.columnCount;return Math.max(0,Math.min(a-1,Math.floor(n/o)))},getColumnStopIndexForStartIndex:function(e,n,o){var a=e.columnWidth,S=e.columnCount,p=e.width,d=n*a,h=Math.ceil((p+o-d)/a);return Math.max(0,Math.min(S-1,n+h-1))},getRowStartIndexForOffset:function(e,n){var o=e.rowHeight,a=e.rowCount;return Math.max(0,Math.min(a-1,Math.floor(n/o)))},getRowStopIndexForStartIndex:function(e,n,o){var a=e.rowHeight,S=e.rowCount,p=e.height,d=n*a,h=Math.ceil((p+o-d)/a);return Math.max(0,Math.min(S-1,n+h-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}});const Ae=({src:t,thumbnailSrc:e,alt:n})=>{const[o,a]=f.useState(!1),[S,p]=f.useState(!1),[d,h]=f.useState(!1),v=f.useRef(null),N=e||t;return f.useEffect(()=>{const x=v.current;if(!x)return;const m=new IntersectionObserver(([I])=>{I.isIntersecting&&(a(!0),m.disconnect())},Re);return m.observe(x),()=>m.disconnect()},[]),d?s.jsx("div",{ref:v,className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-base-700 to-base-800",children:s.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):s.jsxs("div",{ref:v,className:"w-full h-full relative",children:[!S&&s.jsx("div",{className:"absolute inset-0 bg-base-700 animate-pulse"}),o&&s.jsx("img",{className:`w-full h-full object-cover transition-opacity duration-300 ${S?"opacity-100":"opacity-0"}`,src:N,alt:n,decoding:"async",onLoad:()=>p(!0),onError:()=>h(!0)})]})},he={[Y.Ativo]:{bg:"bg-emerald-500/10",border:"border-l-emerald-500",text:"text-emerald-400"},[Y.Vendido]:{bg:"bg-amber-500/10",border:"border-l-amber-500",text:"text-amber-400"},[Y.Obito]:{bg:"bg-red-500/10",border:"border-l-red-500",text:"text-red-400"}},ke=({animal:t,onClick:e,onQuickWeight:n,onQuickMedication:o,onLongPress:a,showGMD:S=!0,cachedGMD:p})=>{var D,P,z;const[d,h]=f.useState(0),[v,N]=f.useState(!1),[x,m]=f.useState(!1),[I,W]=f.useState(!1),k=f.useRef(0),G=f.useRef(0),H=f.useRef(null),U=f.useRef(null),j=f.useMemo(()=>S?p!==void 0?p:Se(t):null,[S,p,t.id,(D=t.historicoPesagens)==null?void 0:D.length]),L=j!=null&&j.gmdTotal?Ce(j.gmdTotal):null,r=he[t.status]||he[Y.Ativo],l=(P=t.fotos)==null?void 0:P[0],i=t.nome||`Brinco ${t.brinco}`,u=(z=t.historicoPesagens)==null?void 0:z.some(E=>{const A=new Date(E.date),O=new Date(Date.now()-Te*24*60*60*1e3);return A>=O}),g=()=>{H.current&&(clearTimeout(H.current),H.current=null)},c=f.useCallback(E=>{const A=E.touches[0];k.current=A.clientX,G.current=A.clientY,m(!1),W(!1),N(!1),a&&(H.current=setTimeout(()=>{var F;"vibrate"in navigator&&navigator.vibrate(50);const O=(F=U.current)==null?void 0:F.getBoundingClientRect();O&&a(t,{x:O.left+O.width/2,y:O.top}),m(!0),W(!0),h(0)},oe))},[t,a]),w=f.useCallback(E=>{if(x||I)return;const A=E.touches[0],O=A.clientX-k.current,F=Math.abs(A.clientY-G.current);(Math.abs(O)>10||F>10)&&g(),F<50&&Math.abs(O)>15&&(N(!0),h(Math.max(-120,Math.min(120,O))))},[x,I]),T=f.useCallback(()=>{if(g(),x||I){m(!1),h(0),N(!1);return}d>se&&n?("vibrate"in navigator&&navigator.vibrate(30),W(!0),n(t)):d<-se&&o&&("vibrate"in navigator&&navigator.vibrate(30),W(!0),o(t)),h(0),setTimeout(()=>{N(!1),W(!1)},200)},[d,t,n,o,x,I]),y=f.useCallback(()=>{g(),m(!1),W(!1),h(0),N(!1)},[]),R=f.useCallback(E=>{a&&(H.current=setTimeout(()=>{a(t,{x:E.clientX,y:E.clientY}),m(!0),W(!0)},oe))},[t,a]),C=f.useCallback(()=>{g()},[]),b=f.useCallback(()=>{!x&&!I&&!v&&Math.abs(d)<20&&e()},[d,x,I,v,e]),M=d>30,_=d<-30;return s.jsxs("div",{className:"animal-card relative overflow-hidden rounded-xl",children:[n&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-blue-500 flex items-center justify-start pl-3 rounded-xl",style:{opacity:M?Math.min(1,Math.abs(d)/100):0,transition:v?"none":"opacity 0.2s"},children:s.jsxs("div",{className:"text-white text-center",children:[s.jsx("span",{className:"text-2xl",children:"âš–ï¸"}),s.jsx("p",{className:"text-xs font-medium",children:"Peso"})]})}),o&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-l from-red-600 to-red-500 flex items-center justify-end pr-3 rounded-xl",style:{opacity:_?Math.min(1,Math.abs(d)/100):0,transition:v?"none":"opacity 0.2s"},children:s.jsxs("div",{className:"text-white text-center",children:[s.jsx("span",{className:"text-2xl",children:"ðŸ’Š"}),s.jsx("p",{className:"text-xs font-medium",children:"Med"})]})}),s.jsxs("div",{ref:U,onClick:b,onTouchStart:c,onTouchMove:w,onTouchEnd:T,onTouchCancel:y,onMouseDown:R,onMouseUp:C,onMouseLeave:C,style:{transform:`translateX(${d}px)`,transition:v?"none":"transform 0.2s ease-out"},className:`
          bg-base-800 rounded-xl shadow-lg overflow-hidden cursor-pointer relative
          border-l-4 ${r.border}
          hover:bg-base-750 transition-colors
        `,children:[s.jsxs("div",{className:"relative aspect-square w-full",children:[l?s.jsx(Ae,{src:l,thumbnailSrc:t.thumbnailUrl,alt:i}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-base-700 to-base-800",children:s.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),u&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"w-2.5 h-2.5 bg-emerald-400 rounded-full block shadow-lg shadow-emerald-400/50",title:"Pesado recentemente"})}),s.jsx("div",{className:`absolute top-2 right-2 px-2 py-0.5 text-[10px] font-semibold rounded-full ${r.bg} ${r.text} backdrop-blur-sm`,children:t.status}),L&&(j==null?void 0:j.gmdTotal)&&j.gmdTotal>0&&s.jsxs("div",{className:`absolute bottom-2 right-2 px-2 py-0.5 text-[10px] font-medium rounded-full bg-base-900/80 backdrop-blur-sm ${L.color}`,children:[j.gmdTotal.toFixed(2)," kg/d"]})]}),s.jsxs("div",{className:"p-2.5",children:[s.jsx("h3",{className:"font-bold text-sm text-white truncate leading-tight",children:i}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-400",children:"Sexo:"}),s.jsx("span",{className:"font-semibold text-white",children:t.sexo})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-400",children:"MÃ£e:"}),s.jsx("span",{className:"font-semibold text-white",children:t.maeNome||"NÃ£o inf."})]})]}),s.jsx("div",{className:"mt-1.5 flex items-center gap-2 text-[11px] text-gray-400",children:s.jsx("span",{className:"truncate",children:t.raca})})]})]})]})},me=Z.memo(ke,(t,e)=>t.animal===e.animal&&t.onClick===e.onClick&&t.showGMD===e.showGMD),Fe=()=>{const[t,e]=f.useState(V.default);return f.useEffect(()=>{const n=()=>{const o=window.innerWidth;o>=X["2xl"]?e(V["2xl"]):o>=X.xl?e(V.xl):o>=X.lg?e(V.lg):o>=X.md?e(V.md):o>=X.sm?e(V.sm):e(V.default)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t},ze=t=>{const[e,n]=f.useState(0);return f.useEffect(()=>{if(!t.current)return;const o=new ResizeObserver(a=>{n(a[0].contentRect.width)});return o.observe(t.current),()=>o.disconnect()},[t]),e},fe=Z.memo(({animals:t,columnCount:e,containerWidth:n,onSelectAnimal:o,onQuickWeight:a,onQuickMedication:S,onLongPress:p,showGMD:d})=>{const h=Math.ceil(t.length/e),v=Math.floor((n-(e-1)*K)/e),N=ae+K,x=Math.min(window.innerHeight*.8,800),m=f.useCallback(({columnIndex:I,rowIndex:W,style:k})=>{const G=W*e+I;if(G>=t.length)return null;const H=t[G];return s.jsx("div",{style:{...k,left:Number(k.left)+I*K,top:Number(k.top)+W*K,width:v,height:ae},children:s.jsx(me,{animal:H,onClick:()=>o(H),onQuickWeight:a,onQuickMedication:S,onLongPress:p,showGMD:d,cachedGMD:H._cachedGMD})})},[t,e,v,o,a,S,p,d]);return s.jsx(Pe,{columnCount:e,columnWidth:v+K,height:x,rowCount:h,rowHeight:N,width:n,overscanRowCount:Ie,className:"scrollbar-thin scrollbar-thumb-base-600",children:m})});fe.displayName="VirtualizedGrid";const pe=Z.memo(({animals:t,onSelectAnimal:e,onQuickWeight:n,onQuickMedication:o,onLongPress:a,showGMD:S})=>s.jsx("div",{className:`
      grid
      grid-cols-2
      gap-3
      sm:grid-cols-3
      md:grid-cols-4
      lg:grid-cols-5
      xl:grid-cols-6
      2xl:grid-cols-7
    `,children:t.map(p=>s.jsx(me,{animal:p,onClick:()=>e(p),onQuickWeight:n,onQuickMedication:o,onLongPress:a,showGMD:S,cachedGMD:p._cachedGMD},p.id))}),(t,e)=>{if(t.animals.length!==e.animals.length||t.showGMD!==e.showGMD)return!1;for(let n=0;n<t.animals.length;n++)if(t.animals[n].id!==e.animals[n].id)return!1;return!0});pe.displayName="NormalGrid";const Ge=({animals:t,onSelectAnimal:e,onQuickWeight:n,onQuickMedication:o,onLongPress:a,showGMD:S=!0})=>{const p=f.useRef(null),d=Fe(),h=ze(p),v=t.length>ye;return!t||t.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[s.jsx("div",{className:"w-24 h-24 mb-4 rounded-full bg-base-800 flex items-center justify-center",children:s.jsx("svg",{className:"w-12 h-12 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),s.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Nenhum animal encontrado"}),s.jsx("p",{className:"text-gray-400 text-center max-w-sm",children:"Ajuste os filtros ou cadastre um novo animal para comeÃ§ar."})]}):s.jsxs("div",{ref:p,children:[(n||o)&&s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4 md:hidden",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-600/20 flex items-center justify-center",children:s.jsx("span",{className:"text-blue-400",children:"â†"})}),s.jsx("span",{children:"Peso"})]}),s.jsx("span",{className:"text-gray-600",children:"|"}),s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[s.jsx("span",{children:"MedicaÃ§Ã£o"}),s.jsx("span",{className:"w-6 h-6 rounded-full bg-red-600/20 flex items-center justify-center",children:s.jsx("span",{className:"text-red-400",children:"â†’"})})]})]}),v&&h>0?s.jsx(fe,{animals:t,columnCount:d,containerWidth:h,onSelectAnimal:e,onQuickWeight:n,onQuickMedication:o,onLongPress:a,showGMD:S}):s.jsx(pe,{animals:t,onSelectAnimal:e,onQuickWeight:n,onQuickMedication:o,onLongPress:a,showGMD:S}),s.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:[t.length," ",t.length===1?"animal":"animais",v&&s.jsx("span",{className:"ml-2 text-xs text-brand-primary-light",children:"(virtualizado)"})]})]})},$e=Z.memo(Ge,(t,e)=>{if(t.animals.length!==e.animals.length||t.showGMD!==e.showGMD)return!1;const n=t.animals.map(a=>a.id).join(","),o=e.animals.map(a=>a.id).join(",");return n===o});export{$e as default};
