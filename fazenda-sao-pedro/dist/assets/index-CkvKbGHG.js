const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CalendarView-CHpgKBx1.js","assets/calendar-sEluIg52.js","assets/vendor-CMJYdXG8.js","assets/TasksView-CqojOw7T.js","assets/Dashboard-CAVrvD3S.js","assets/StatsDashboard-BnBTOE6k.js","assets/WeatherWidget-C5cKMd7B.js","assets/FilterBar-UeHoew-W.js","assets/ExportButtons-NVJ4AgU7.js","assets/ReportsView-J2ljTXg4.js","assets/geminiServiceOptimized-CEbfgzhD.js","assets/ManagementView-BmsYUZeB.js","assets/BatchManagement-B2bFbhQK.js","assets/index-DfYXGMma.js","assets/useSpeechRecognition-DZH6TaoQ.js","assets/AddAnimalModal-Cs9TF-Uy.js","assets/ScaleImportModal-WdfttMK5.js","assets/Chatbot-BMoM7_Df.js"])))=>i.map(i=>d[i]);
import{r as tt,g as at,a as ft}from"./vendor-CMJYdXG8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(l){if(l.ep)return;l.ep=!0;const d=a(l);fetch(l.href,d)}})();var _e={exports:{}},je={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ke;function bt(){if(Ke)return je;Ke=1;var t=tt(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function c(w,v,A){var p,f={},y=null,m=null;A!==void 0&&(y=""+A),v.key!==void 0&&(y=""+v.key),v.ref!==void 0&&(m=v.ref);for(p in v)n.call(v,p)&&!d.hasOwnProperty(p)&&(f[p]=v[p]);if(w&&w.defaultProps)for(p in v=w.defaultProps,v)f[p]===void 0&&(f[p]=v[p]);return{$$typeof:s,type:w,key:y,ref:m,props:f,_owner:l.current}}return je.Fragment=a,je.jsx=c,je.jsxs=c,je}var He;function wt(){return He||(He=1,_e.exports=bt()),_e.exports}var e=wt(),o=tt();const yt=at(o);var Ce={},Ge;function vt(){if(Ge)return Ce;Ge=1;var t=ft();return Ce.createRoot=t.createRoot,Ce.hydrateRoot=t.hydrateRoot,Ce}var At=vt();const jt=at(At),Nt="modulepreload",Et=function(t){return"/"+t},qe={},U=function(s,a,n){let l=Promise.resolve();if(a&&a.length>0){let c=function(A){return Promise.all(A.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),v=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));l=c(a.map(A=>{if(A=Et(A),A in qe)return;qe[A]=!0;const p=A.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${f}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Nt,p||(y.as="script"),y.crossOrigin="",y.href=A,v&&y.setAttribute("nonce",v),document.head.appendChild(y),p)return new Promise((m,_)=>{y.addEventListener("load",m),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${A}`)))})}))}function d(c){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=c,window.dispatchEvent(w),!w.defaultPrevented)throw c}return l.then(c=>{for(const w of c||[])w.status==="rejected"&&d(w.reason);return s().catch(d)})},st=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),nt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Sa=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),_a=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),rt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0012 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 01-2.031.352 5.988 5.988 0 01-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 01-2.031.352 5.989 5.989 0 01-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971z"})}),$e=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),ot=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"})}),it=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75"})}),lt=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),La=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})}),ka=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Da=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),Ta=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Ra=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Ia=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})}),Ma=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),Oa=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"})}),Pa=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"})}),za=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"})}),Fa=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),Ba=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"})}),Va=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})});var Ct=(t=>(t.Hereford="Hereford",t.Braford="Braford",t.HerefordPO="Hereford PO",t.Outros="Outros",t))(Ct||{}),Ee=(t=>(t.Macho="Macho",t.Femea="F√™mea",t))(Ee||{}),ct=(t=>(t.Ativo="Ativo",t.Vendido="Vendido",t.Obito="√ìbito",t))(ct||{}),H=(t=>(t.None="Nenhum",t.Birth="Nascimento",t.Weaning="Desmame",t.Yearling="Sobreano",t))(H||{}),St=(t=>(t.TransferenciaEmbriao="Transfer√™ncia de Embri√£o",t.InseminacaoArtificial="Insemina√ß√£o Artificial",t.Monta="Monta Natural",t))(St||{}),B=(t=>(t.Proprietario="proprietario",t.Capataz="capataz",t.Veterinario="veterinario",t.Funcionario="funcionario",t))(B||{});const Le={proprietario:{canViewAnimals:!0,canEditAnimals:!0,canDeleteAnimals:!0,canViewFinancial:!0,canEditFinancial:!0,canViewReports:!0,canManageUsers:!0,canViewCalendar:!0,canEditCalendar:!0,canViewTasks:!0,canEditTasks:!0},capataz:{canViewAnimals:!1,canEditAnimals:!1,canDeleteAnimals:!1,canViewFinancial:!1,canEditFinancial:!1,canViewReports:!1,canManageUsers:!1,canViewCalendar:!0,canEditCalendar:!0,canViewTasks:!0,canEditTasks:!0},veterinario:{canViewAnimals:!0,canEditAnimals:!0,canDeleteAnimals:!1,canViewFinancial:!1,canEditFinancial:!1,canViewReports:!0,canManageUsers:!1,canViewCalendar:!0,canEditCalendar:!0,canViewTasks:!0,canEditTasks:!0},funcionario:{canViewAnimals:!0,canEditAnimals:!1,canDeleteAnimals:!1,canViewFinancial:!1,canEditFinancial:!1,canViewReports:!1,canManageUsers:!1,canViewCalendar:!0,canEditCalendar:!1,canViewTasks:!0,canEditTasks:!1}},Ye={searchTerm:"",selectedMedication:"",selectedReason:"",selectedStatus:"",selectedSexo:"",selectedRaca:"",selectedAreaId:"",weightRange:{min:null,max:null},ageRange:{minMonths:null,maxMonths:null},searchFields:["brinco","nome"],sortConfig:{field:"brinco",direction:"asc"}},dt=[{id:"w1",type:"breed-distribution",title:"Distribui√ß√£o por Ra√ßa",enabled:!0,order:1,size:"medium"},{id:"w2",type:"sex-distribution",title:"Distribui√ß√£o por Sexo",enabled:!0,order:2,size:"small"},{id:"w3",type:"weight-chart",title:"Peso M√©dio por M√™s",enabled:!0,order:3,size:"large"},{id:"w4",type:"age-distribution",title:"Distribui√ß√£o por Idade",enabled:!0,order:4,size:"medium"},{id:"w5",type:"calendar-preview",title:"Pr√≥ximos Eventos",enabled:!0,order:5,size:"medium"},{id:"w6",type:"tasks-preview",title:"Tarefas Pendentes",enabled:!0,order:6,size:"medium"},{id:"w7",type:"area-distribution",title:"Animais por √Årea",enabled:!1,order:7,size:"medium"},{id:"w8",type:"health-summary",title:"Resumo Sanit√°rio",enabled:!1,order:8,size:"medium"},{id:"w9",type:"weight-evolution",title:"Evolu√ß√£o de Peso",enabled:!1,order:9,size:"large"},{id:"w10",type:"weather",title:"Clima e Precipita√ß√£o",enabled:!0,order:10,size:"medium"}],ke={widgets:dt,layout:"grid",compactMode:!1};var _t=(t=>(t.Ensolarado="Ensolarado",t.Nublado="Nublado",t.Chuvoso="Chuvoso",t.Tempestade="Tempestade",t.Geada="Geada",t.Seco="Seco",t))(_t||{});const Z=window.firebase;let De=null,le=null,E=null,Be=null,Ve=null,Ue=null,We=null;try{if(!Z)throw new Error("A biblioteca Firebase n√£o foi carregada. Verifique as tags <script> em seu index.html.");const t=window.__FIREBASE_CONFIG__||{};t!=null&&t.apiKey&&t.apiKey!=="YOUR_API_KEY"&&t.projectId&&(Z.apps.length?De=Z.app():De=Z.initializeApp(t),le=Z.auth(),E=Z.firestore(),Be=Z.storage(),Ve=new Z.auth.GoogleAuthProvider,Ue=Z.firestore.Timestamp,We=Z.firestore.FieldValue)}catch{De=null,le=null,E=null,Be=null}const Lt={[B.Proprietario]:{icon:"üëë",label:"Propriet√°rio"},[B.Capataz]:{icon:"üë∑",label:"Capataz"},[B.Veterinario]:{icon:"ü©∫",label:"Veterin√°rio"},[B.Funcionario]:{icon:"üßë‚Äçüåæ",label:"Funcion√°rio"}},be=({view:t,label:s,children:a,currentView:n,setCurrentView:l})=>e.jsxs("button",{onClick:()=>l(t),className:`px-3 py-2 flex items-center gap-2 text-sm font-medium rounded-lg transition-all ${n===t?"bg-brand-primary text-white shadow-md shadow-brand-primary/20":"text-gray-300 hover:bg-base-700 hover:text-white"}`,children:[a,s]}),kt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),Dt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t||"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Tt=({currentView:t,setCurrentView:s,onAddAnimalClick:a,user:n,onForceSync:l,lastSync:d,userRole:c=B.Proprietario,onRoleClick:w})=>{const[v,A]=o.useState(!1),p=()=>{le&&le.signOut()},f=async()=>{if(!(!l||v)){A(!0);try{await l()}catch{}finally{A(!1)}}},y=()=>{if(!d)return"Nunca";const _=Date.now()-d;return _<6e4?"Agora":_<36e5?`${Math.floor(_/6e4)}min`:new Date(d).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})},m=Lt[c];return e.jsx("header",{className:"header-gradient shadow-lg border-b border-base-700/50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-12 md:h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/logo.png",alt:"Fazenda+",className:"h-8 md:h-11 w-auto cow-logo"}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:"Fazenda+"}),e.jsx("p",{className:"text-[10px] text-gray-400 -mt-0.5",children:"Gest√£o de Rebanho"})]})]}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[e.jsx(be,{view:"dashboard",label:"Painel",currentView:t,setCurrentView:s,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),e.jsx(be,{view:"management",label:"Manejo",currentView:t,setCurrentView:s,children:e.jsx(lt,{className:"h-4 w-4"})}),e.jsx(be,{view:"batches",label:"Lotes",currentView:t,setCurrentView:s,children:e.jsx(rt,{className:"h-4 w-4"})}),e.jsx(be,{view:"calendar",label:"Agenda",currentView:t,setCurrentView:s,children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx(be,{view:"tasks",label:"Tarefas",currentView:t,setCurrentView:s,children:e.jsx(it,{className:"h-4 w-4"})}),e.jsx(be,{view:"reports",label:"Relat√≥rios",currentView:t,setCurrentView:s,children:e.jsx($e,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx("button",{onClick:()=>s("reports"),className:`md:hidden p-2 rounded-lg transition-all ${t==="reports"?"bg-brand-primary text-white":"text-gray-400 hover:text-white"}`,children:e.jsx($e,{className:"w-5 h-5"})}),l&&e.jsx("button",{onClick:f,disabled:v,className:`p-2 rounded-lg transition-all ${v?"text-brand-primary-light":"text-gray-400 hover:text-white hover:bg-base-700"}`,title:`Sync: ${y()}`,children:e.jsx(kt,{className:`w-5 h-5 ${v?"animate-spin":""}`})}),a&&e.jsxs("button",{onClick:a,className:"hidden md:flex items-center gap-2 bg-brand-primary hover:bg-brand-primary-light text-white font-semibold py-2 px-4 rounded-lg transition-all shadow-md shadow-brand-primary/20",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{children:"Novo Animal"})]}),e.jsx("div",{className:"hidden md:block w-px h-8 bg-base-600 mx-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"h-8 w-8 rounded-full ring-2 ring-base-600",src:n.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.displayName||"U")}&background=374151&color=fff&size=64`,alt:"Avatar"}),e.jsx("span",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-emerald-400 rounded-full ring-2 ring-base-800"})]}),e.jsxs("div",{className:"max-w-[120px]",children:[e.jsx("p",{className:"hidden sm:block text-sm font-medium text-white truncate",children:n.displayName}),w?e.jsxs("button",{onClick:w,className:"text-xs text-gray-400 hover:text-brand-primary-light flex items-center gap-1",children:[e.jsx("span",{children:m.icon}),e.jsx("span",{children:m.label})]}):e.jsxs("p",{className:"hidden sm:block text-xs text-gray-500",children:["Sync: ",y()]})]}),e.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",title:"Sair",children:e.jsx(Dt,{className:"h-5 w-5"})})]})]})]})})})};class Rt{constructor(){this.storageKey="offline_operations_queue"}add(s){var l;let a=this.getQueue();(l=s.data)!=null&&l.id&&(a=a.filter(d=>{var c,w;return!(d.collection===s.collection&&((c=d.data)==null?void 0:c.id)===((w=s.data)==null?void 0:w.id))}));const n={...s,id:`${Date.now()}_${Math.random()}`,timestamp:Date.now()};a.push(n),localStorage.setItem(this.storageKey,JSON.stringify(a))}getQueue(){const s=localStorage.getItem(this.storageKey);return s?JSON.parse(s):[]}async processQueue(s){const a=this.getQueue();if(a.length!==0){for(const n of a)try{n.type==="create"?await s.collection(n.collection).add(n.data):n.type==="update"?await s.collection(n.collection).doc(n.data.id).set(n.data,{merge:!0}):n.type==="delete"&&await s.collection(n.collection).doc(n.data.id).delete()}catch{continue}localStorage.removeItem(this.storageKey)}}remove(s){const a=this.getQueue().filter(n=>n.id!==s);localStorage.setItem(this.storageKey,JSON.stringify(a))}clearQueue(){localStorage.removeItem(this.storageKey)}}const Te=new Rt;window.addEventListener("online",()=>{window.dispatchEvent(new Event("sync-offline-data"))});window.addEventListener("offline",()=>{});const te=({size:t="md",className:s=""})=>{const a={sm:"h-4 w-4 border-b-2",md:"h-5 w-5 border-b-2",lg:"h-8 w-8 border-b-3"};return e.jsx("div",{className:`animate-spin rounded-full border-white ${a[t]} ${s}`})},Ne=({view:t,label:s,isActive:a,onClick:n,children:l})=>e.jsxs("button",{onClick:()=>n(t),className:`
            relative flex flex-col items-center justify-center py-1
            transition-all duration-200 min-w-[48px]
            ${a?"text-brand-primary-light":"text-gray-500 active:text-gray-300"}
        `,children:[a&&e.jsx("span",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-6 h-1 bg-brand-primary rounded-full"}),e.jsx("div",{className:`
            p-1 rounded-lg transition-all duration-200
            ${a?"bg-brand-primary/10":""}
        `,children:l}),e.jsx("span",{className:`
            text-[9px] mt-0.5 font-medium transition-all leading-tight
            ${a?"text-brand-primary-light":"text-gray-500"}
        `,children:s})]}),It=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t||"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),Mt=({currentView:t,setCurrentView:s,onAddAnimalClick:a})=>e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-base-900/95 backdrop-blur-lg border-t border-base-700/50"}),e.jsxs("nav",{className:"relative flex items-center justify-between h-16 px-2",children:[e.jsxs("div",{className:"flex items-center justify-around flex-1",children:[e.jsx(Ne,{view:"dashboard",label:"Painel",isActive:t==="dashboard",onClick:s,children:e.jsx(It,{className:"w-5 h-5"})}),e.jsx(Ne,{view:"management",label:"Manejo",isActive:t==="management",onClick:s,children:e.jsx(lt,{className:"w-5 h-5"})}),e.jsx(Ne,{view:"batches",label:"Lotes",isActive:t==="batches",onClick:s,children:e.jsx(rt,{className:"w-5 h-5"})}),e.jsx(Ne,{view:"calendar",label:"Agenda",isActive:t==="calendar",onClick:s,children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsx(Ne,{view:"tasks",label:"Tarefas",isActive:t==="tasks",onClick:s,children:e.jsx(it,{className:"w-5 h-5"})})]}),a&&e.jsx("button",{onClick:a,className:`
                            flex items-center justify-center
                            w-12 h-12 ml-2
                            bg-brand-primary
                            text-white rounded-xl
                            shadow-lg shadow-brand-primary/30
                            transition-all duration-200
                            active:scale-95 active:bg-brand-primary-light
                        `,"aria-label":"Cadastrar animal",children:e.jsx(st,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"h-safe bg-base-900/95",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"}})]}),Ot=({widgets:t,toggleWidget:s,setWidgetSize:a,resetToDefault:n,onClose:l})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-base-800 rounded-lg p-6 w-full max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Configurar Dashboard"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-white",children:"‚úï"})]}),e.jsx("div",{className:"space-y-3",children:t.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-base-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:d.enabled,onChange:()=>s(d.id),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm",children:d.title})]}),e.jsxs("select",{value:d.size,onChange:c=>a(d.id,c.target.value),disabled:!d.enabled,className:"bg-base-600 text-xs rounded px-2 py-1",children:[e.jsx("option",{value:"small",children:"P"}),e.jsx("option",{value:"medium",children:"M"}),e.jsx("option",{value:"large",children:"G"})]})]},d.id))}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:n,className:"flex-1 py-2 bg-base-700 hover:bg-base-600 rounded-lg text-sm",children:"Restaurar Padr√£o"}),e.jsx("button",{onClick:l,className:"flex-1 py-2 bg-brand-primary hover:bg-brand-primary-dark rounded-lg text-sm",children:"Fechar"})]})]})}),Pt="287672",Re={[B.Proprietario]:{icon:"üëë",title:"Propriet√°rio",description:"Acesso completo a todas as funcionalidades"},[B.Capataz]:{icon:"üë∑",title:"Capataz",description:"Acesso apenas a Tarefas e Calend√°rio"},[B.Veterinario]:{icon:"ü©∫",title:"Veterin√°rio",description:"Acesso a animais, relat√≥rios sanit√°rios e calend√°rio"},[B.Funcionario]:{icon:"üßë‚Äçüåæ",title:"Funcion√°rio",description:"Acesso de visualiza√ß√£o (somente leitura)"}},Qe=({currentRole:t,onChangeRole:s,isOpen:a,onClose:n})=>{const[l,d]=o.useState(!1),[c,w]=o.useState(""),[v,A]=o.useState(null),[p,f]=o.useState("");o.useEffect(()=>{a||(d(!1),w(""),A(null),f(""))},[a]);const y=x=>{x!==t&&(A(x),d(!0),w(""),f(""))},m=()=>{c===Pt?v&&(s(v),n()):(f("Senha incorreta"),w(""))},_=x=>{x.key==="Enter"&&m()},O=()=>{d(!1),w(""),A(null),f("")};return a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:n}),e.jsx("div",{className:"fixed inset-x-4 top-1/2 -translate-y-1/2 md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-96 bg-base-800 rounded-lg shadow-xl z-50 overflow-hidden",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-base-700",children:[e.jsx("button",{onClick:O,className:"text-gray-400 hover:text-white mb-2 flex items-center gap-1",children:"‚Üê Voltar"}),e.jsx("h2",{className:"text-lg font-bold text-white",children:"Digite a Senha"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Para alterar para: ",v&&Re[v].title]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-5xl",children:v&&Re[v].icon})}),e.jsxs("div",{children:[e.jsx("input",{type:"password",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,value:c,onChange:x=>{const R=x.target.value.replace(/\D/g,"");w(R),f("")},onKeyDown:_,placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"w-full px-4 py-4 bg-base-700 border border-base-600 rounded-lg text-white text-center text-2xl tracking-[0.5em] placeholder:tracking-normal",autoFocus:!0}),p&&e.jsx("p",{className:"text-red-400 text-sm text-center mt-2",children:p})]}),e.jsx("div",{className:"flex justify-center gap-2",children:[0,1,2,3,4,5].map(x=>e.jsx("div",{className:`w-3 h-3 rounded-full ${c.length>x?"bg-brand-primary":"bg-base-600"}`},x))}),e.jsx("button",{onClick:m,disabled:c.length!==6,className:"w-full py-3 bg-brand-primary text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirmar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-base-700",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Selecionar Perfil de Acesso"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Escolha o n√≠vel de acesso para este dispositivo"})]}),e.jsx("div",{className:"p-4 space-y-2",children:Object.values(B).map(x=>{const R=Re[x],S=t===x;return e.jsx("button",{onClick:()=>y(x),className:`w-full p-4 rounded-lg text-left transition-all ${S?"bg-brand-primary/20 border-2 border-brand-primary":"bg-base-700 border-2 border-transparent hover:border-base-600"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:R.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-white",children:R.title}),S&&e.jsx("span",{className:"px-2 py-0.5 bg-brand-primary text-white text-xs rounded-full",children:"Atual"})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:R.description})]}),!S&&e.jsx("span",{className:"text-gray-500",children:"üîí"})]})},x)})}),e.jsx("div",{className:"p-4 bg-base-900 border-t border-base-700",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"üîí Altera√ß√£o de perfil requer senha"})})]})})]}):null},zt=o.lazy(()=>U(()=>import("./CalendarView-CHpgKBx1.js"),__vite__mapDeps([0,1,2]))),Ft=o.lazy(()=>U(()=>import("./TasksView-CqojOw7T.js"),__vite__mapDeps([3,2]))),Bt=({user:t,tasks:s,calendarEvents:a,onAddTask:n,onToggleTask:l,onDeleteTask:d,onAddCalendarEvent:c,onDeleteCalendarEvent:w})=>{const[v,A]=o.useState("tarefas"),p=s.filter(m=>!m.isCompleted).length,f=s.filter(m=>m.isCompleted?(new Date().toDateString(),!0):!1).length,y=a.filter(m=>{const _=new Date(m.date),O=new Date,x=new Date(O.getTime()+10080*60*1e3);return _>=O&&_<=x}).length;return e.jsxs("div",{className:"min-h-screen bg-base-900 text-white",children:[e.jsx("header",{className:"bg-base-800 border-b border-base-700 px-4 py-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-brand-primary",children:"Painel do Capataz"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Ol√°, ",t.displayName||"Capataz"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs",children:B.Capataz})})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4",children:[e.jsxs("div",{className:"bg-base-800 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-orange-400",children:p}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tarefas Pendentes"})]}),e.jsxs("div",{className:"bg-base-800 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-400",children:f}),e.jsx("p",{className:"text-xs text-gray-400",children:"Conclu√≠das Hoje"})]}),e.jsxs("div",{className:"bg-base-800 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-400",children:y}),e.jsx("p",{className:"text-xs text-gray-400",children:"Eventos (7 dias)"})]})]}),e.jsxs("div",{className:"flex border-b border-base-700",children:[e.jsx("button",{onClick:()=>A("tarefas"),className:`flex-1 py-3 text-center font-medium transition-colors ${v==="tarefas"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:"üìã Tarefas"}),e.jsx("button",{onClick:()=>A("calendario"),className:`flex-1 py-3 text-center font-medium transition-colors ${v==="calendario"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:"üìÖ Calend√°rio"})]}),e.jsx("div",{className:"p-4",children:e.jsxs(o.Suspense,{fallback:e.jsx(te,{}),children:[v==="tarefas"&&e.jsx(Ft,{tasks:s,onAddTask:n,onToggleTask:l,onDeleteTask:d}),v==="calendario"&&e.jsx(zt,{events:a,onAddEvent:c,onDeleteEvent:w})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-base-800 border-t border-base-700 px-4 py-2",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"üë∑ Modo Capataz - Acesso restrito a tarefas e calend√°rio"})})]})},Vt=({isOpen:t,onClose:s,title:a,children:n})=>{if(!t)return null;const l=d=>{d.stopPropagation()};return e.jsx("div",{className:"fixed inset-0 bg-base-900 bg-opacity-75 flex justify-center items-center z-50 p-4",onClick:()=>s(),children:e.jsxs("div",{className:"bg-base-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:l,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-base-700",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:a}),e.jsx("button",{onClick:()=>s(),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(nt,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto",children:n})]})})},Wt=({isOpen:t,onClose:s,animal:a,onSave:n})=>{const[l,d]=o.useState(""),[c,w]=o.useState(H.None),v=()=>{if(!a||!l)return;const f=parseFloat(l);isNaN(f)||f<=0||(n(a.id,f,c),d(""),w(H.None),s())},A=()=>{d(""),w(H.None),s()};if(!a)return null;const p=l?parseFloat(l)-a.pesoKg:0;return e.jsx(Vt,{isOpen:t,onClose:A,title:"‚öñÔ∏è Registrar Peso",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-base-700 rounded-lg p-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white",children:a.nome||a.brinco}),e.jsx("p",{className:"text-sm text-gray-400",children:a.raca})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Peso atual"}),e.jsxs("p",{className:"text-xl font-bold text-brand-primary",children:[a.pesoKg," kg"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Novo Peso (kg)"}),e.jsx("input",{type:"number",value:l,onChange:f=>d(f.target.value),placeholder:"Ex: 320",className:"w-full px-4 py-3 bg-base-700 border border-base-600 rounded-lg text-white text-xl text-center",autoFocus:!0}),p!==0&&!isNaN(p)&&e.jsxs("p",{className:`text-sm mt-1 text-center ${p>0?"text-green-400":"text-red-400"}`,children:[p>0?"+":"",p.toFixed(1)," kg"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Tipo de Pesagem"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.values(H).map(f=>e.jsx("button",{onClick:()=>w(f),className:`px-3 py-2 rounded-lg text-sm transition-colors ${c===f?"bg-brand-primary text-white":"bg-base-700 text-gray-400 hover:bg-base-600"}`,children:f},f))})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:A,className:"flex-1 px-4 py-2 bg-base-700 text-white rounded-lg hover:bg-base-600",children:"Cancelar"}),e.jsx("button",{onClick:v,disabled:!l||parseFloat(l)<=0,className:"flex-1 px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-primary-dark disabled:opacity-50",children:"Salvar"})]})]})})},Ut=["Ivermectina","Doramectina","Vacina Aftosa","Vacina Carb√∫nculo"],Kt=["Preven√ß√£o","Vermifuga√ß√£o","Vacina√ß√£o","Tratamento"],Ht=({isOpen:t,onClose:s,animal:a,onSave:n})=>{var R;const[l,d]=o.useState(""),[c,w]=o.useState(""),[v,A]=o.useState("ml"),[p,f]=o.useState(""),[y,m]=o.useState("Equipe Campo");o.useEffect(()=>{if(t){const S=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${S}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",window.scrollTo(0,S)}}},[t]);const _=()=>{!a||!l||!p||(n(a.id,{medicamento:l,dose:parseFloat(c)||0,unidade:v,motivo:p,responsavel:y,dataAplicacao:new Date}),d(""),w(""),A("ml"),f(""),s())},O=()=>{d(""),w(""),f(""),s()},x=S=>{S.stopPropagation()};return!t||!a?null:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center",style:{touchAction:"none"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:O}),e.jsxs("div",{className:"relative bg-base-800 rounded-t-2xl sm:rounded-lg shadow-xl w-full sm:max-w-md flex flex-col",style:{maxHeight:"80vh",touchAction:"pan-y"},onTouchMove:x,onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-base-700 shrink-0",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"üíä Registrar Medica√ß√£o"}),e.jsx("button",{onClick:O,className:"text-gray-400 hover:text-white p-2 -mr-2",children:e.jsx(nt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain p-4 space-y-3",style:{WebkitOverflowScrolling:"touch"},children:[e.jsxs("div",{className:"bg-base-700 rounded-lg p-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white",children:a.nome||a.brinco}),e.jsxs("p",{className:"text-sm text-gray-400",children:[a.raca," ‚Ä¢ ",a.pesoKg,"kg"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Tratamentos"}),e.jsx("p",{className:"text-xl font-bold text-red-400",children:((R=a.historicoSanitario)==null?void 0:R.length)||0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Medicamento *"}),e.jsx("input",{type:"text",value:l,onChange:S=>d(S.target.value),placeholder:"Nome do medicamento",className:"w-full px-3 py-2 bg-base-700 border border-base-600 rounded-lg text-white"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Ut.map(S=>e.jsx("button",{type:"button",onClick:()=>d(S),className:`px-2 py-1 text-xs rounded ${l===S?"bg-brand-primary text-white":"bg-base-600 text-gray-300"}`,children:S},S))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Dose"}),e.jsx("input",{type:"number",value:c,onChange:S=>w(S.target.value),placeholder:"0",className:"w-full px-3 py-2 bg-base-700 border border-base-600 rounded-lg text-white"})]}),e.jsxs("div",{className:"w-24",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Unidade"}),e.jsxs("select",{value:v,onChange:S=>A(S.target.value),className:"w-full px-3 py-2 bg-base-700 border border-base-600 rounded-lg text-white",children:[e.jsx("option",{value:"ml",children:"ml"}),e.jsx("option",{value:"mg",children:"mg"}),e.jsx("option",{value:"dose",children:"dose"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Motivo *"}),e.jsx("input",{type:"text",value:p,onChange:S=>f(S.target.value),placeholder:"Motivo da aplica√ß√£o",className:"w-full px-3 py-2 bg-base-700 border border-base-600 rounded-lg text-white"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Kt.map(S=>e.jsx("button",{type:"button",onClick:()=>f(S),className:`px-2 py-1 text-xs rounded ${p===S?"bg-red-600 text-white":"bg-base-600 text-gray-300"}`,children:S},S))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Respons√°vel"}),e.jsx("input",{type:"text",value:y,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 bg-base-700 border border-base-600 rounded-lg text-white"})]}),e.jsx("div",{className:"h-4"})]}),e.jsx("div",{className:"p-4 border-t border-base-700 shrink-0 bg-base-800 safe-area-inset-bottom",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:O,className:"flex-1 px-4 py-3 bg-base-700 text-white rounded-lg font-medium active:bg-base-600",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:_,disabled:!l||!p,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-medium disabled:opacity-50 active:bg-red-700",children:"Salvar"})]})})]})]})},Ie="v2",Gt=3600*1e3,qt=1800*1e3,we={INITIAL_LOAD:100,PAGINATION_SIZE:25,MAX_BATCH_WRITE:500},Me=500,Wa=80,Ua=600,Ka=280,Ha=12,Ga=50,qa=2,$a={rootMargin:"100px",threshold:0},Je={top:1,under:.5},Ya=30,Qa={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},Ja={default:2,sm:3,md:4,lg:5,xl:6,"2xl":7};class $t{constructor(){this.dbName="fazenda-cache",this.storeName="cache",this.db=null,this.initPromise=null}async init(){return this.initPromise?this.initPromise:this.db?Promise.resolve():(this.initPromise=new Promise((s,a)=>{const n=indexedDB.open(this.dbName,1);n.onerror=()=>{this.initPromise=null,a(n.error)},n.onsuccess=()=>{this.db=n.result,s()},n.onupgradeneeded=l=>{const d=l.target.result;d.objectStoreNames.contains(this.storeName)||d.createObjectStore(this.storeName,{keyPath:"key"})}}),this.initPromise)}async get(s){return await this.init(),this.db?new Promise(a=>{try{const d=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(s);d.onsuccess=()=>{const c=d.result;c&&c.version===Ie?a(c):a(null)},d.onerror=()=>{a(null)}}catch{a(null)}}):null}async set(s,a){if(await this.init(),!!this.db)return new Promise(n=>{try{const l=this.db.transaction([this.storeName],"readwrite");l.objectStore(this.storeName).put({key:s,data:a,timestamp:Date.now(),version:Ie}),l.oncomplete=()=>n(),l.onerror=()=>{n()}}catch{n()}})}async clear(){if(await this.init(),!!this.db)return new Promise(s=>{try{const a=this.db.transaction([this.storeName],"readwrite");a.objectStore(this.storeName).clear(),a.oncomplete=()=>{s()},a.onerror=()=>s()}catch{s()}})}async delete(s){if(await this.init(),!!this.db)return new Promise(a=>{try{const n=this.db.transaction([this.storeName],"readwrite");n.objectStore(this.storeName).delete(s),n.oncomplete=()=>a(),n.onerror=()=>a()}catch{a()}})}isFresh(s){return Date.now()-s<Gt}getAgeMinutes(s){return Math.floor((Date.now()-s)/(60*1e3))}async cleanOldEntries(s=10080*60*1e3){return await this.init(),this.db?new Promise(a=>{try{const d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).openCursor();let c=0;const w=Date.now();d.onsuccess=v=>{const A=v.target.result;if(A){const p=A.value;(w-(p.timestamp||0)>s||p.version!==Ie)&&(A.delete(),c++),A.continue()}else c>0,a(c)},d.onerror=()=>{a(0)}}catch{a(0)}}):0}async getStats(){return await this.init(),this.db?new Promise(s=>{try{const l=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).openCursor();let d=0,c=0,w=Date.now();l.onsuccess=v=>{const A=v.target.result;A?(d++,c+=JSON.stringify(A.value).length,w=Math.min(w,A.value.timestamp||Date.now()),A.continue()):s({entryCount:d,totalSize:c,oldestEntry:w})},l.onerror=()=>s({entryCount:0,totalSize:0,oldestEntry:0})}catch{s({entryCount:0,totalSize:0,oldestEntry:0})}}):{entryCount:0,totalSize:0,oldestEntry:0}}}const xe=new $t,X=t=>{if(!t)return t;if(Array.isArray(t))return t.map(s=>X(s));if(t instanceof Ue)return t.toDate();if(typeof t=="object"&&t!==null){const s={...t};for(const a in s)s[a]=X(s[a]);return s}return t},ie=t=>{if(!t)return t;if(Array.isArray(t))return t.map(s=>ie(s));if(t instanceof Date)return Ue.fromDate(t);if(typeof t=="object"&&t!==null){const s={...t};for(const a in s)s[a]=ie(s[a]);return s}return t},Za=t=>{if(!t)return"Data inv√°lida";const s=new Date(t);return isNaN(s.getTime())?"Data inv√°lida":s.toLocaleDateString("pt-BR")},Xa=t=>{if(!t)return"";const s=new Date(t);return isNaN(s.getTime())?"":s.toISOString().split("T")[0]},ee=t=>{if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(a=>ee(a)).filter(a=>a!==void 0);const s={};for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const n=t[a];n!==void 0&&(s[a]=ee(n))}return s},Yt={enabled:!0,collections:["animals","calendar","tasks"]},Oe={animals:[],calendarEvents:[],tasks:[],managementAreas:[],batches:[],loading:{animals:!0,calendar:!0,tasks:!0,areas:!0,batches:!0},error:null,lastSync:null,listenersActive:!1,pagination:{animals:{hasMore:!1,lastDoc:null,isLoadingMore:!1}}},Qt=(t,s)=>{switch(s.type){case"SET_LOADING_STATUS":return{...t,loading:{...t.loading,[s.payload.collection]:s.payload.status}};case"SET_DATA":return{...t,[s.payload.collection]:s.payload.data};case"SET_ERROR":return{...t,error:s.payload};case"SET_LAST_SYNC":return{...t,lastSync:s.payload};case"SET_LISTENERS_ACTIVE":return{...t,listenersActive:s.payload};case"SET_PAGINATION":return{...t,pagination:{...t.pagination,[s.payload.collection]:{...t.pagination[s.payload.collection],hasMore:s.payload.hasMore,lastDoc:s.payload.lastDoc}}};case"SET_LOADING_MORE":return{...t,pagination:{...t.pagination,[s.payload.collection]:{...t.pagination[s.payload.collection],isLoadingMore:s.payload.isLoading}}};case"APPEND_DATA":return{...t,animals:[...t.animals,...s.payload.data]};case"LOCAL_ADD_ANIMAL":return{...t,animals:[...t.animals,s.payload]};case"LOCAL_UPDATE_ANIMAL":return{...t,animals:t.animals.map(a=>a.id===s.payload.animalId?{...a,...s.payload.updatedData}:a)};case"LOCAL_DELETE_ANIMAL":return{...t,animals:t.animals.filter(a=>a.id!==s.payload.animalId)};case"LOCAL_ADD_CALENDAR_EVENT":return{...t,calendarEvents:[...t.calendarEvents,s.payload]};case"LOCAL_UPDATE_CALENDAR_EVENT":return{...t,calendarEvents:t.calendarEvents.map(a=>a.id===s.payload.id?s.payload:a)};case"LOCAL_DELETE_CALENDAR_EVENT":return{...t,calendarEvents:t.calendarEvents.filter(a=>a.id!==s.payload.eventId)};case"LOCAL_ADD_TASK":return{...t,tasks:[...t.tasks,s.payload]};case"LOCAL_UPDATE_TASK":return{...t,tasks:t.tasks.map(a=>a.id===s.payload.taskId?{...a,...s.payload.updatedData}:a)};case"LOCAL_DELETE_TASK":return{...t,tasks:t.tasks.filter(a=>a.id!==s.payload.taskId)};case"LOCAL_ADD_AREA":return{...t,managementAreas:[...t.managementAreas,s.payload]};case"LOCAL_UPDATE_AREA":return{...t,managementAreas:t.managementAreas.map(a=>a.id===s.payload.id?s.payload:a)};case"LOCAL_DELETE_AREA":return{...t,managementAreas:t.managementAreas.filter(a=>a.id!==s.payload.areaId)};case"LOCAL_ADD_BATCH":return{...t,batches:[...t.batches,s.payload]};case"LOCAL_UPDATE_BATCH":return{...t,batches:t.batches.map(a=>a.id===s.payload.batchId?{...a,...s.payload.updatedData}:a)};case"LOCAL_DELETE_BATCH":return{...t,batches:t.batches.filter(a=>a.id!==s.payload.batchId)};default:return t}},Jt=t=>{const[s,a]=o.useReducer(Qt,Oe),n=t==null?void 0:t.uid,l=o.useRef(!1),d=o.useRef(0),c=o.useRef(s);o.useEffect(()=>{c.current=s},[s]);const w=o.useRef({}),v=o.useRef(!1),A=o.useRef(null),p=o.useCallback(async(u,r,i,g,h)=>{if(!n||!E)return[];const j=`${n}_${u}`,b=async()=>{let N=E.collection(r).where("userId","==",n);const M=u==="animals"&&h;M&&(N=N.orderBy("brinco")),h&&(N=N.limit(M?h+1:h));const k=await N.get(),L=M?k.docs.length>h:!1,z=L?k.docs.slice(0,h):k.docs,F=M&&z.length>0?z[z.length-1]:null;return{data:z.map(P=>{const $=X(P.data());let Y={id:P.id,...$};return g&&(Y=g(Y)),Y}),lastDoc:F,hasMore:L}},C=await xe.get(j);if(C)return a({type:"SET_DATA",payload:{collection:u,data:C.data}}),a({type:"SET_LOADING_STATUS",payload:{collection:i,status:!1}}),xe.isFresh(C.timestamp)||b().then(async({data:N,lastDoc:M,hasMore:k})=>{await xe.set(j,N),a({type:"SET_DATA",payload:{collection:u,data:N}}),u==="animals"&&(A.current=M,a({type:"SET_PAGINATION",payload:{collection:"animals",hasMore:k,lastDoc:M}}))}).catch(N=>{}),C.data;try{const{data:N,lastDoc:M,hasMore:k}=await b();return await xe.set(j,N),a({type:"SET_DATA",payload:{collection:u,data:N}}),a({type:"SET_LOADING_STATUS",payload:{collection:i,status:!1}}),u==="animals"&&(A.current=M,a({type:"SET_PAGINATION",payload:{collection:"animals",hasMore:k,lastDoc:M}})),N}catch{return a({type:"SET_ERROR",payload:`Falha ao buscar ${u}`}),a({type:"SET_LOADING_STATUS",payload:{collection:i,status:!1}}),[]}},[n]),f=o.useCallback(async()=>{if(!n||!E)return;const{hasMore:u,isLoadingMore:r}=c.current.pagination.animals,i=A.current;if(!(!u||r||!i)){a({type:"SET_LOADING_MORE",payload:{collection:"animals",isLoading:!0}});try{const h=await E.collection("animals").where("userId","==",n).orderBy("brinco").startAfter(i).limit(we.PAGINATION_SIZE+1).get(),j=h.docs.length>we.PAGINATION_SIZE,b=j?h.docs.slice(0,we.PAGINATION_SIZE):h.docs,C=b.length>0?b[b.length-1]:null,N=b.map(k=>{const L=X(k.data());return y({id:k.id,...L})});a({type:"APPEND_DATA",payload:{collection:"animals",data:N}}),A.current=C,a({type:"SET_PAGINATION",payload:{collection:"animals",hasMore:j,lastDoc:C}});const M=[...c.current.animals,...N];await m("animals",M)}catch{a({type:"SET_ERROR",payload:"Erro ao carregar mais animais"})}finally{a({type:"SET_LOADING_MORE",payload:{collection:"animals",isLoading:!1}})}}},[n,m]),y=u=>{let r=[];const i=u.fotos;return typeof i=="string"&&i.trim()?r=[i]:Array.isArray(i)&&(r=i.map(g=>typeof g=="string"?g:g==null?void 0:g.url).filter(g=>!!g&&g.trim()!=="")),r.length===0&&(r=["https://storage.googleapis.com/aistudio-marketplace/gallery/cattle_management/cow_placeholder.png"]),{...u,fotos:r,historicoSanitario:u.historicoSanitario||[],historicoPesagens:u.historicoPesagens||[],historicoPrenhez:u.historicoPrenhez||[],historicoAborto:u.historicoAborto||[],historicoProgenie:u.historicoProgenie||[]}},m=o.useCallback(async(u,r)=>{if(!n)return;const i=`${n}_${u}`;await xe.set(i,r)},[n]),_=o.useCallback(()=>{if(!n||!E)return;const u=E.collection("animals").where("userId","==",n).onSnapshot(g=>{v.current&&(g.docChanges().forEach(h=>{const j=X(h.doc.data()),b=y({id:h.doc.id,...j});h.type==="added"&&(c.current.animals.some(N=>N.id===b.id)||a({type:"LOCAL_ADD_ANIMAL",payload:b})),h.type==="modified"&&a({type:"LOCAL_UPDATE_ANIMAL",payload:{animalId:b.id,updatedData:b}}),h.type==="removed"&&a({type:"LOCAL_DELETE_ANIMAL",payload:{animalId:b.id}})}),m("animals",c.current.animals))},g=>{});w.current.animals=u;const r=E.collection("calendar").where("userId","==",n).onSnapshot(g=>{v.current&&(g.docChanges().forEach(h=>{const j=X(h.doc.data()),b={id:h.doc.id,...j};h.type==="added"&&(c.current.calendarEvents.some(N=>N.id===b.id)||a({type:"LOCAL_ADD_CALENDAR_EVENT",payload:b})),h.type==="modified"&&a({type:"LOCAL_UPDATE_CALENDAR_EVENT",payload:b}),h.type==="removed"&&a({type:"LOCAL_DELETE_CALENDAR_EVENT",payload:{eventId:b.id}})}),m("calendarEvents",c.current.calendarEvents))},g=>{});w.current.calendar=r;const i=E.collection("tasks").where("userId","==",n).onSnapshot(g=>{v.current&&(g.docChanges().forEach(h=>{const j=X(h.doc.data()),b={id:h.doc.id,...j};h.type==="added"&&(c.current.tasks.some(N=>N.id===b.id)||a({type:"LOCAL_ADD_TASK",payload:b})),h.type==="modified"&&a({type:"LOCAL_UPDATE_TASK",payload:{taskId:b.id,updatedData:b}}),h.type==="removed"&&a({type:"LOCAL_DELETE_TASK",payload:{taskId:b.id}})}),m("tasks",c.current.tasks))},g=>{});w.current.tasks=i,a({type:"SET_LISTENERS_ACTIVE",payload:!0})},[n,m]),O=o.useCallback(async()=>{if(!n||!E||l.current)return;const u=c.current.lastSync;if(!u)return!1;l.current=!0;try{const r=new Date(u);let i=0;try{const g=await E.collection("animals").where("userId","==",n).where("updatedAt",">",r).get();g.empty||g.docs.forEach(h=>{const j=X(h.data()),b=y({id:h.id,...j}),C=c.current.animals.some(N=>N.id===b.id);a(C?{type:"LOCAL_UPDATE_ANIMAL",payload:{animalId:b.id,updatedData:b}}:{type:"LOCAL_ADD_ANIMAL",payload:b}),i++})}catch{}try{const g=await E.collection("calendar").where("userId","==",n).where("updatedAt",">",r).get();g.empty||g.docs.forEach(h=>{const j=X(h.data()),b={id:h.id,...j},C=c.current.calendarEvents.some(N=>N.id===b.id);a(C?{type:"LOCAL_UPDATE_CALENDAR_EVENT",payload:b}:{type:"LOCAL_ADD_CALENDAR_EVENT",payload:b}),i++})}catch{}try{const g=await E.collection("tasks").where("userId","==",n).where("updatedAt",">",r).get();g.empty||g.docs.forEach(h=>{const j=X(h.data()),b={id:h.id,...j},C=c.current.tasks.some(N=>N.id===b.id);a(C?{type:"LOCAL_UPDATE_TASK",payload:{taskId:b.id,updatedData:b}}:{type:"LOCAL_ADD_TASK",payload:b}),i++})}catch{}a({type:"SET_LAST_SYNC",payload:Date.now()}),i>0&&await Promise.all([m("animals",c.current.animals),m("calendarEvents",c.current.calendarEvents),m("tasks",c.current.tasks)])}catch{}finally{l.current=!1}},[n,m]);o.useEffect(()=>{(async()=>{try{await xe.cleanOldEntries(2592e5)>0}catch{}})()},[]),o.useEffect(()=>{if(!n||!E){Object.keys(Oe.loading).forEach(r=>{a({type:"SET_LOADING_STATUS",payload:{collection:r,status:!1}})});return}return(async()=>{if(!l.current){l.current=!0;try{await Promise.all([p("animals","animals","animals",y,we.INITIAL_LOAD),p("calendarEvents","calendar","calendar",void 0,we.INITIAL_LOAD),p("tasks","tasks","tasks",void 0,we.INITIAL_LOAD),p("managementAreas","areas","areas"),p("batches","batches","batches")]),a({type:"SET_LAST_SYNC",payload:Date.now()}),v.current=!0,Yt.enabled&&_()}finally{l.current=!1}}})(),()=>{Object.values(w.current).forEach(r=>{typeof r=="function"&&r()}),w.current={},v.current=!1,a({type:"SET_LISTENERS_ACTIVE",payload:!1})}},[n,p,_]);const x=o.useCallback(async()=>{const u=Date.now();if(!n||l.current||u-d.current<5e3){u-d.current<5e3;return}d.current=u,await xe.clear(),Object.keys(Oe.loading).forEach(r=>{a({type:"SET_LOADING_STATUS",payload:{collection:r,status:!0}})}),await Promise.all([p("animals","animals","animals",y),p("calendarEvents","calendar","calendar"),p("tasks","tasks","tasks"),p("managementAreas","areas","areas"),p("batches","batches","batches")]),a({type:"SET_LAST_SYNC",payload:Date.now()})},[n,p]),R=o.useCallback(async u=>{if(!(!n||!E))try{const r=E.batch(),i=E.collection("animals").doc(),g=u.pesoKg>0?[{id:`initial-${i.id}`,date:u.dataNascimento||new Date,weightKg:u.pesoKg,type:H.None}]:[],h={...u,fotos:["https://storage.googleapis.com/aistudio-marketplace/gallery/cattle_management/cow_placeholder.png"],historicoSanitario:[],historicoPesagens:g,historicoPrenhez:[],historicoAborto:[],historicoProgenie:[]},j=ee(h),b=ie(j);if(r.set(i,{...b,userId:n,updatedAt:new Date}),u.maeNome){const N=u.maeNome.toLowerCase().trim(),k=c.current.animals.find(L=>L.brinco.toLowerCase().trim()===N&&L.sexo===Ee.Femea);if(k){const L=E.collection("animals").doc(k.id),z={id:`prog_${i.id}`,offspringBrinco:u.brinco};u.pesoKg>0&&(z.birthWeightKg=u.pesoKg),r.update(L,{historicoProgenie:We.arrayUnion(z),updatedAt:new Date});const F=[...k.historicoProgenie||[],z];a({type:"LOCAL_UPDATE_ANIMAL",payload:{animalId:k.id,updatedData:{historicoProgenie:F}}})}}const C={id:i.id,...h};a({type:"LOCAL_ADD_ANIMAL",payload:C}),await r.commit(),await m("animals",[...c.current.animals,C])}catch(r){throw await x(),r}},[n,m,x]),S=o.useCallback(async(u,r)=>{if(!(!n||!E)){a({type:"LOCAL_UPDATE_ANIMAL",payload:{animalId:u,updatedData:r}});try{const i=E.batch(),g=E.collection("animals").doc(u),h=ee(r),j=ie(h);if(i.update(g,{...j,updatedAt:new Date}),r.historicoPesagens){const C=c.current.animals,N=C.find(M=>M.id===u);if(N!=null&&N.maeNome){const M=N.maeNome.toLowerCase().trim(),k=C.find(L=>L.brinco.toLowerCase().trim()===M&&L.sexo===Ee.Femea);if(k){const L=r.historicoPesagens;let z,F,W;if(L.forEach(P=>{P.type===H.Birth?z=P.weightKg:P.type===H.Weaning?F=P.weightKg:P.type===H.Yearling&&(W=P.weightKg)}),z!==void 0||F!==void 0||W!==void 0){const P=k.historicoProgenie||[],$=P.find(T=>T.offspringBrinco.toLowerCase()===N.brinco.toLowerCase());let Y;if($)Y=P.map(T=>T.offspringBrinco.toLowerCase()===N.brinco.toLowerCase()?{...T,birthWeightKg:z??T.birthWeightKg,weaningWeightKg:F??T.weaningWeightKg,yearlingWeightKg:W??T.yearlingWeightKg}:T);else{const T={id:`prog_${u}`,offspringBrinco:N.brinco,birthWeightKg:z,weaningWeightKg:F,yearlingWeightKg:W};Y=[...P,T]}const ge=E.collection("animals").doc(k.id),I=ee(Y);i.update(ge,{historicoProgenie:I,updatedAt:new Date}),a({type:"LOCAL_UPDATE_ANIMAL",payload:{animalId:k.id,updatedData:{historicoProgenie:Y}}})}}}}await i.commit();const b=c.current.animals.map(C=>C.id===u?{...C,...r}:C);await m("animals",b)}catch(i){throw await x(),i}}},[n,m,x]),ne=o.useCallback(async u=>{if(!n||!E)throw new Error("N√£o autenticado");a({type:"LOCAL_DELETE_ANIMAL",payload:{animalId:u}});try{await E.collection("animals").doc(u).delete();const r=c.current.animals.filter(i=>i.id!==u);await m("animals",r)}catch(r){throw await x(),r}},[n,m,x]),ce=o.useCallback(async u=>{if(!n||!E)return;const{id:r,...i}=u,g=ee(i),h=ie(g);try{if(r){const j={id:r,...i};a({type:"LOCAL_UPDATE_CALENDAR_EVENT",payload:j}),await E.collection("calendar").doc(r).update({...h,updatedAt:new Date});const b=c.current.calendarEvents.map(C=>C.id===r?j:C);await m("calendarEvents",b)}else{const b={id:(await E.collection("calendar").add({...h,userId:n,updatedAt:new Date})).id,...i};a({type:"LOCAL_ADD_CALENDAR_EVENT",payload:b}),await m("calendarEvents",[...c.current.calendarEvents,b])}}catch(j){throw await x(),j}},[n,m,x]),de=o.useCallback(async u=>{if(!(!n||!E)){a({type:"LOCAL_DELETE_CALENDAR_EVENT",payload:{eventId:u}});try{await E.collection("calendar").doc(u).delete();const r=c.current.calendarEvents.filter(i=>i.id!==u);await m("calendarEvents",r)}catch(r){throw await x(),r}}},[n,m,x]),me=o.useCallback(async u=>{if(!n||!E)return;const r=ee({...u,isCompleted:!1,userId:n}),i=ie(r);try{const h={id:(await E.collection("tasks").add({...i,updatedAt:new Date})).id,...u,isCompleted:!1};a({type:"LOCAL_ADD_TASK",payload:h}),await m("tasks",[...c.current.tasks,h])}catch(g){throw await x(),g}},[n,m,x]),ue=o.useCallback(async u=>{if(!n||!E)return;const r=!u.isCompleted;a({type:"LOCAL_UPDATE_TASK",payload:{taskId:u.id,updatedData:{isCompleted:r}}});try{await E.collection("tasks").doc(u.id).update({isCompleted:r,updatedAt:new Date});const i=c.current.tasks.map(g=>g.id===u.id?{...g,isCompleted:r}:g);await m("tasks",i)}catch(i){throw await x(),i}},[n,m,x]),he=o.useCallback(async u=>{if(!(!n||!E)){a({type:"LOCAL_DELETE_TASK",payload:{taskId:u}});try{await E.collection("tasks").doc(u).delete();const r=c.current.tasks.filter(i=>i.id!==u);await m("tasks",r)}catch(r){throw await x(),r}}},[n,m,x]),pe=o.useCallback(async u=>{if(!n||!E)return;const{id:r,...i}=u,g=ee(i);try{if(r){const h={id:r,...i};a({type:"LOCAL_UPDATE_AREA",payload:h}),await E.collection("areas").doc(r).update({...g,updatedAt:new Date});const j=c.current.managementAreas.map(b=>b.id===r?h:b);await m("managementAreas",j)}else{const j={id:(await E.collection("areas").add({...g,userId:n,updatedAt:new Date})).id,...i};a({type:"LOCAL_ADD_AREA",payload:j}),await m("managementAreas",[...c.current.managementAreas,j])}}catch(h){throw await x(),h}},[n,m,x]),V=o.useCallback(async u=>{if(!n||!E)return;const r=c.current.animals,i=c.current.managementAreas;a({type:"LOCAL_DELETE_AREA",payload:{areaId:u}});const g=r.filter(h=>h.managementAreaId===u);g.forEach(h=>{a({type:"LOCAL_UPDATE_ANIMAL",payload:{animalId:h.id,updatedData:{managementAreaId:void 0}}})});try{const h=E.batch();g.forEach(C=>{const N=E.collection("animals").doc(C.id);h.update(N,{managementAreaId:We.delete(),updatedAt:new Date})}),h.delete(E.collection("areas").doc(u)),await h.commit();const j=i.filter(C=>C.id!==u);await m("managementAreas",j);const b=r.map(C=>C.managementAreaId===u?{...C,managementAreaId:void 0}:C);await m("animals",b)}catch(h){throw await x(),h}},[n,m,x]),G=o.useCallback(async(u,r)=>{if(!(!n||!E)){r.forEach(i=>{a({type:"LOCAL_UPDATE_ANIMAL",payload:{animalId:i,updatedData:{managementAreaId:u}}})});try{const i=E.batch();r.forEach(h=>{const j=E.collection("animals").doc(h);i.update(j,{managementAreaId:u,updatedAt:new Date})}),await i.commit();const g=c.current.animals.map(h=>r.includes(h.id)?{...h,managementAreaId:u}:h);await m("animals",g)}catch(i){throw await x(),i}}},[n,m,x]),Q=o.useCallback(async u=>{if(!n||!E)return;const r=ee({...u,userId:n}),i=ie(r);try{const h={id:(await E.collection("batches").add({...i,updatedAt:new Date})).id,...u};return a({type:"LOCAL_ADD_BATCH",payload:h}),await m("batches",[...c.current.batches,h]),h}catch(g){throw await x(),g}},[n,m,x]),J=o.useCallback(async(u,r)=>{if(!(!n||!E)){a({type:"LOCAL_UPDATE_BATCH",payload:{batchId:u,updatedData:r}});try{const i=E.collection("batches").doc(u),g=ee(r),h=ie(g);await i.update({...h,updatedAt:new Date});const j=c.current.batches.map(b=>b.id===u?{...b,...r}:b);await m("batches",j)}catch(i){throw await x(),i}}},[n,m,x]),re=o.useCallback(async u=>{if(!(!n||!E)){a({type:"LOCAL_DELETE_BATCH",payload:{batchId:u}});try{await E.collection("batches").doc(u).delete();const r=c.current.batches.filter(i=>i.id!==u);await m("batches",r)}catch(r){throw await x(),r}}},[n,m,x]),ae=o.useCallback(async u=>{if(!n||!E)return;await J(u,{status:"completed",completedAt:new Date})},[n,E,J]);return{state:s,db:E,forceSync:x,syncDelta:O,loadMoreAnimals:f,addAnimal:R,updateAnimal:S,deleteAnimal:ne,addOrUpdateCalendarEvent:ce,deleteCalendarEvent:de,addTask:me,toggleTaskCompletion:ue,deleteTask:he,addOrUpdateManagementArea:pe,deleteManagementArea:V,assignAnimalsToArea:G,createBatch:Q,updateBatch:J,deleteBatch:re,completeBatch:ae}};function Pe(t,s){let a=null;const n=(...l)=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t(...l)},s)};return n.cancel=()=>{a&&(clearTimeout(a),a=null)},n}const ze=(t,s,a,n)=>{const l=Math.ceil((new Date(n).getTime()-new Date(a).getTime())/864e5);return l<=0?0:Number(((s-t)/l).toFixed(3))},Zt=t=>{const s=t.historicoPesagens||[];if(s.length<2)return{gmdTotal:0,diasAcompanhamento:0};const a=[...s].sort((x,R)=>new Date(x.date).getTime()-new Date(R.date).getTime()),n=a[0],l=a[a.length-1],d=Math.ceil((new Date(l.date).getTime()-new Date(n.date).getTime())/(1e3*60*60*24)),c=d>0?Number(((l.weightKg-n.weightKg)/d).toFixed(3)):0,w=a.find(x=>x.type===H.Birth),v=a.find(x=>x.type===H.Weaning);let A;w&&v&&(A=ze(w.weightKg,v.weightKg,w.date,v.date));const p=a.find(x=>x.type===H.Yearling);let f;v&&p&&(f=ze(v.weightKg,p.weightKg,v.date,p.date));const y=new Date,m=new Date(y.getTime()-720*60*60*1e3),_=a.filter(x=>new Date(x.date)>=m);let O;if(_.length>=2){const x=_[0],R=_[_.length-1];O=ze(x.weightKg,R.weightKg,x.date,R.date)}return{gmdTotal:c,gmdNascimentoDesmame:A,gmdDesmameSobreano:f,gmdUltimos30Dias:O,diasAcompanhamento:d,pesoInicial:n.weightKg,pesoFinal:l.weightKg}},es=t=>{if(!t)return 0;const s=new Date,a=new Date(t),n=s.getTime()-a.getTime();return Math.floor(n/(1e3*60*60*24*30.44))},ts=t=>t==null?"N/A":`${t.toFixed(3)} kg/dia`,as=t=>t>=1.5?{label:"Excelente",color:"text-green-400"}:t>=1?{label:"Bom",color:"text-blue-400"}:t>=.7?{label:"Regular",color:"text-yellow-400"}:t>=.4?{label:"Abaixo",color:"text-orange-400"}:{label:"Cr√≠tico",color:"text-red-400"},Ze=t=>{const s=new Date,a=new Date(t),n=(s.getFullYear()-a.getFullYear())*12+(s.getMonth()-a.getMonth());return Math.max(0,n)},Xt=({animals:t,areas:s})=>{const[a,n]=o.useState(Ye),[l,d]=o.useState(""),[c,w]=o.useState({min:null,max:null}),[v,A]=o.useState({minMonths:null,maxMonths:null}),[p,f]=o.useState(!1),y=o.useRef(Pe(r=>{d(r),f(!1)},Me)),m=o.useRef(Pe(r=>{w(r),f(!1)},Me)),_=o.useRef(Pe(r=>{A(r),f(!1)},Me));o.useEffect(()=>{const r=y.current,i=m.current,g=_.current;return()=>{r.cancel(),i.cancel(),g.cancel()}},[]);const O=o.useMemo(()=>{const r=new Set;return t.forEach(i=>{i.historicoSanitario.forEach(g=>r.add(g.medicamento))}),Array.from(r).sort()},[t]),x=o.useMemo(()=>{const r=new Set;return t.forEach(i=>{i.historicoSanitario.forEach(g=>r.add(g.motivo))}),Array.from(r).sort()},[t]),R=o.useMemo(()=>t.map(r=>({...r,_cachedGMD:Zt(r)})),[t]),S=o.useMemo(()=>{let r=R.filter(i=>{if(l){const h=l.toLowerCase().trim(),j=h.includes(" ou "),b=h.includes(" e ");let C,N;j?(C=h.split(" ou ").map(L=>L.trim()).filter(Boolean),N="or"):b?(C=h.split(" e ").map(L=>L.trim()).filter(Boolean),N="and"):(C=[h],N="single");const M=L=>a.searchFields.some(z=>{var F,W,P;switch(z){case"brinco":return i.brinco.toLowerCase().includes(L);case"nome":return(F=i.nome)==null?void 0:F.toLowerCase().includes(L);case"paiNome":return(W=i.paiNome)==null?void 0:W.toLowerCase().includes(L);case"maeNome":return(P=i.maeNome)==null?void 0:P.toLowerCase().includes(L);case"medicamento":return i.historicoSanitario.some($=>$.medicamento.toLowerCase().includes(L));case"motivo":return i.historicoSanitario.some($=>$.motivo.toLowerCase().includes(L));default:return!1}});let k;if(N==="or"?k=C.some(L=>M(L)):N==="and"?k=C.every(L=>M(L)):k=M(C[0]),!k)return!1}if(a.selectedMedication&&!i.historicoSanitario.some(j=>j.medicamento===a.selectedMedication)||a.selectedReason&&!i.historicoSanitario.some(j=>j.motivo===a.selectedReason)||a.selectedStatus&&i.status!==a.selectedStatus||a.selectedSexo&&i.sexo!==a.selectedSexo||a.selectedRaca&&i.raca!==a.selectedRaca)return!1;if(a.selectedAreaId){if(a.selectedAreaId==="sem-area"){if(i.managementAreaId)return!1}else if(i.managementAreaId!==a.selectedAreaId)return!1}if(c.min!==null&&i.pesoKg<c.min||c.max!==null&&i.pesoKg>c.max)return!1;const g=Ze(i.dataNascimento);return!(v.minMonths!==null&&g<v.minMonths||v.maxMonths!==null&&g>v.maxMonths)});return r.sort((i,g)=>{const{field:h,direction:j}=a.sortConfig;let b=0;switch(h){case"brinco":b=i.brinco.localeCompare(g.brinco);break;case"nome":b=(i.nome||"").localeCompare(g.nome||"");break;case"pesoKg":b=i.pesoKg-g.pesoKg;break;case"dataNascimento":b=new Date(i.dataNascimento).getTime()-new Date(g.dataNascimento).getTime();break;case"raca":b=i.raca.localeCompare(g.raca);break;case"status":b=i.status.localeCompare(g.status);break}return j==="asc"?b:-b}),r},[R,l,c,v,a.selectedMedication,a.selectedReason,a.selectedStatus,a.selectedSexo,a.selectedRaca,a.selectedAreaId,a.searchFields,a.sortConfig]),ne=o.useMemo(()=>{var ge;const r=S.filter(I=>I.status===ct.Ativo),i=r.reduce((I,T)=>I+T.pesoKg,0),g=r.filter(I=>I.sexo===Ee.Macho).length,h=r.filter(I=>I.sexo===Ee.Femea).length,j={};r.forEach(I=>{j[I.raca]=(j[I.raca]||0)+1});const b={bezerros:0,jovens:0,novilhos:0,adultos:0};r.forEach(I=>{const T=Ze(I.dataNascimento);T<=6?b.bezerros++:T<=12?b.jovens++:T<=24?b.novilhos++:b.adultos++});const C={leve:0,medio:0,pesado:0};r.forEach(I=>{I.pesoKg<200?C.leve++:I.pesoKg<=400?C.medio++:C.pesado++});const N={};r.forEach(I=>{var oe;const T=I.managementAreaId?((oe=s.find(Se=>Se.id===I.managementAreaId))==null?void 0:oe.name)||"√Årea Desconhecida":"Sem √Årea";N[T]=(N[T]||0)+1});let M=0,k=0;const L={};S.forEach(I=>{I.historicoSanitario.length>0&&(k++,M+=I.historicoSanitario.length,I.historicoSanitario.forEach(T=>{L[T.medicamento]=(L[T.medicamento]||0)+1}))});const z=((ge=Object.entries(L).sort(([,I],[,T])=>T-I)[0])==null?void 0:ge[0])||"Nenhum";let F=0,W=0,P=0,$=0;r.forEach(I=>{var oe;const T=((oe=I._cachedGMD)==null?void 0:oe.gmdTotal)??null;T&&T>0&&(F+=T,W++,T>=Je.top&&P++,T<Je.under&&$++)});const Y={averageGMD:W>0?F/W:0,animalsWithGMD:W,topPerformers:P,underperformers:$};return{totalAnimals:S.length,totalWeight:i,averageWeight:r.length>0?i/r.length:0,maleCount:g,femaleCount:h,activeCount:r.length,breedDistribution:j,ageDistribution:b,weightRangeDistribution:C,areaDistribution:N,healthStats:{totalTreatments:M,animalsWithTreatments:k,mostUsedMedication:z},gmdStats:Y}},[S,s]),ce=o.useMemo(()=>{let r=0;return a.searchTerm&&r++,a.selectedMedication&&r++,a.selectedReason&&r++,a.selectedStatus&&r++,a.selectedSexo&&r++,a.selectedRaca&&r++,a.selectedAreaId&&r++,(a.weightRange.min!==null||a.weightRange.max!==null)&&r++,(a.ageRange.minMonths!==null||a.ageRange.maxMonths!==null)&&r++,r},[a]),de=o.useCallback(r=>{n(i=>({...i,searchTerm:r})),f(!0),y.current(r)},[]),me=o.useCallback(r=>{n(i=>({...i,selectedMedication:r}))},[]),ue=o.useCallback(r=>{n(i=>({...i,selectedReason:r}))},[]),he=o.useCallback(r=>{n(i=>({...i,selectedStatus:r}))},[]),pe=o.useCallback(r=>{n(i=>({...i,selectedSexo:r}))},[]),V=o.useCallback(r=>{n(i=>({...i,selectedRaca:r}))},[]),G=o.useCallback(r=>{n(i=>({...i,selectedAreaId:r}))},[]),Q=o.useCallback(r=>{n(i=>({...i,weightRange:r})),f(!0),m.current(r)},[]),J=o.useCallback(r=>{n(i=>({...i,ageRange:r})),f(!0),_.current(r)},[]),re=o.useCallback(r=>{n(i=>({...i,searchFields:r}))},[]),ae=o.useCallback(r=>{n(i=>({...i,sortConfig:r}))},[]),u=o.useCallback(()=>{n(Ye),d(""),w({min:null,max:null}),A({minMonths:null,maxMonths:null}),f(!1)},[]);return{filters:a,filteredAnimals:S,stats:ne,setSearchTerm:de,setSelectedMedication:me,setSelectedReason:ue,setSelectedStatus:he,setSelectedSexo:pe,setSelectedRaca:V,setSelectedAreaId:G,setWeightRange:Q,setAgeRange:J,setSearchFields:re,setSortConfig:ae,clearAllFilters:u,activeFiltersCount:ce,allMedications:O,allReasons:x,isFiltering:p}},Fe="fazenda_dashboard_config",ea=()=>{const[t,s]=o.useState(()=>{try{const p=localStorage.getItem(Fe);if(p){const f=JSON.parse(p),y=dt.map(m=>{var O;const _=(O=f.widgets)==null?void 0:O.find(x=>x.type===m.type);return _?{...m,..._}:m});return{...ke,...f,widgets:y}}}catch{}return ke});o.useEffect(()=>{try{localStorage.setItem(Fe,JSON.stringify(t))}catch{}},[t]);const a=t.widgets.filter(p=>p.enabled).sort((p,f)=>p.order-f.order),n=o.useCallback(p=>{s(f=>({...f,widgets:f.widgets.map(y=>y.id===p?{...y,enabled:!y.enabled}:y)}))},[]),l=o.useCallback((p,f)=>{s(y=>{const m=[...y.widgets],_=m.findIndex(x=>x.id===p);if(_===-1)return y;const[O]=m.splice(_,1);return O.order=f,m.forEach((x,R)=>{x.order>=f&&(x.order=x.order+1)}),m.push(O),m.sort((x,R)=>x.order-R.order),m.forEach((x,R)=>{x.order=R+1}),{...y,widgets:m}})},[]),d=o.useCallback((p,f)=>{s(y=>({...y,widgets:y.widgets.map(m=>m.id===p?{...m,size:f}:m)}))},[]),c=o.useCallback(p=>{s(f=>({...f,layout:p}))},[]),w=o.useCallback(p=>{s(f=>({...f,compactMode:p}))},[]),v=o.useCallback(()=>{s(ke),localStorage.removeItem(Fe)},[]),A=o.useCallback(p=>{var f;return((f=t.widgets.find(y=>y.type===p))==null?void 0:f.enabled)??!1},[t.widgets]);return{config:t,enabledWidgets:a,toggleWidget:n,reorderWidgets:l,setWidgetSize:d,setLayout:c,setCompactMode:w,resetToDefault:v,isWidgetEnabled:A}},Xe="user_role",ta=t=>{const[s,a]=o.useState(B.Proprietario),[n,l]=o.useState(Le[B.Proprietario]);o.useEffect(()=>{if(!(t!=null&&t.uid))return;const y=localStorage.getItem(`${Xe}_${t.uid}`);if(y&&Object.values(B).includes(y)){const m=y;a(m),l(Le[m])}},[t==null?void 0:t.uid]);const d=o.useCallback(y=>{t!=null&&t.uid&&(a(y),l(Le[y]),localStorage.setItem(`${Xe}_${t.uid}`,y))},[t==null?void 0:t.uid]),c=o.useCallback(()=>t?{...t,role:s,permissions:n}:null,[t,s,n]),w=o.useCallback(y=>n[y],[n]),v=s===B.Capataz,A=s===B.Proprietario,p=s===B.Veterinario,f=s===B.Funcionario;return{role:s,permissions:n,changeRole:d,getUserProfile:c,canAccess:w,isCapataz:v,isProprietario:A,isVeterinario:p,isFuncionario:f}},mt=o.createContext(void 0),aa=({children:t,user:s})=>{const a=Jt(s),n=Xt({animals:a.state.animals,areas:a.state.managementAreas}),l=ea(),d=ta(s),c={firestore:a,filters:n,dashboardConfig:l,userProfile:d};return e.jsx(mt.Provider,{value:c,children:t})},ut=()=>{const t=o.useContext(mt);if(t===void 0)throw new Error("useFarmData must be used within a FarmProvider");return t},sa=o.lazy(()=>U(()=>import("./Dashboard-CAVrvD3S.js"),__vite__mapDeps([4,2]))),na=o.lazy(()=>U(()=>import("./StatsDashboard-BnBTOE6k.js"),__vite__mapDeps([5,6,2]))),ra=o.lazy(()=>U(()=>import("./FilterBar-UeHoew-W.js"),__vite__mapDeps([7,2]))),oa=o.lazy(()=>U(()=>import("./TasksView-CqojOw7T.js"),__vite__mapDeps([3,2]))),et=o.lazy(()=>U(()=>import("./ExportButtons-NVJ4AgU7.js"),__vite__mapDeps([8,2]))),ia=o.lazy(()=>U(()=>import("./CalendarView-CHpgKBx1.js"),__vite__mapDeps([0,1,2]))),la=o.lazy(()=>U(()=>import("./ReportsView-J2ljTXg4.js"),__vite__mapDeps([9,10,6,2]))),ca=o.lazy(()=>U(()=>import("./ManagementView-BmsYUZeB.js"),__vite__mapDeps([11,2]))),da=o.lazy(()=>U(()=>import("./BatchManagement-B2bFbhQK.js"),__vite__mapDeps([12,1,2]))),ma=({currentView:t,costlyActionsEnabled:s,setShowDashboardSettings:a,onSelectAnimal:n,onQuickWeight:l,onQuickMedication:d,onLongPress:c,setShowScaleImportModal:w,focusNFePanel:v,setFocusNFePanel:A})=>{const{firestore:p,filters:f,dashboardConfig:y}=ut(),{state:m,addTask:_,toggleTaskCompletion:O,deleteTask:x,addOrUpdateCalendarEvent:R,deleteCalendarEvent:S,addOrUpdateManagementArea:ne,deleteManagementArea:ce,assignAnimalsToArea:de,createBatch:me,updateBatch:ue,deleteBatch:he,completeBatch:pe}=p,{filters:V,filteredAnimals:G,stats:Q,setSearchTerm:J,setSearchFields:re,setSelectedMedication:ae,setSelectedReason:u,setSelectedStatus:r,setSelectedSexo:i,setSelectedRaca:g,setSelectedAreaId:h,setWeightRange:j,setAgeRange:b,setSortConfig:C,clearAllFilters:N,activeFiltersCount:M,allMedications:k,allReasons:L}=f,{config:z,enabledWidgets:F,toggleWidget:W}=y;return t==="dashboard"?e.jsxs(o.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(te,{})}),children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-4 md:mb-6 gap-3",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Painel do Rebanho"}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 rounded-md bg-base-700 hover:bg-base-600 text-sm text-white border border-base-600",children:[e.jsx("span",{role:"img","aria-label":"balan√ßa",children:"‚öñÔ∏è"}),"Importar Balan√ßa"]}),s?e.jsx(et,{animals:G,stats:Q,areas:m.managementAreas}):e.jsx("div",{className:"text-xs text-yellow-300 border border-yellow-700 rounded px-3 py-2 bg-yellow-900/20",children:"Configure o Firebase para habilitar exporta√ß√£o."})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Estat√≠sticas"}),e.jsx("button",{onClick:()=>a(!0),className:"text-sm text-brand-primary-light hover:text-brand-primary",children:"‚öôÔ∏è Configurar"})]}),e.jsx(na,{stats:Q,enabledWidgets:F,areas:m.managementAreas,compactMode:z.compactMode,calendarEvents:m.calendarEvents,tasks:m.tasks,animals:G}),e.jsx(ra,{searchTerm:V.searchTerm,setSearchTerm:J,searchFields:V.searchFields,setSearchFields:re,selectedMedication:V.selectedMedication,setSelectedMedication:ae,selectedReason:V.selectedReason,setSelectedReason:u,allMedications:k,allReasons:L,selectedStatus:V.selectedStatus,setSelectedStatus:r,selectedSexo:V.selectedSexo,setSelectedSexo:i,selectedRaca:V.selectedRaca,setSelectedRaca:g,selectedAreaId:V.selectedAreaId,setSelectedAreaId:h,areas:m.managementAreas,weightRange:V.weightRange,setWeightRange:j,ageRange:V.ageRange,setAgeRange:b,sortConfig:V.sortConfig,setSortConfig:C,onClear:N,activeFiltersCount:M}),e.jsx(sa,{animals:G,onSelectAnimal:n,onQuickWeight:l,onQuickMedication:d,onLongPress:c}),e.jsx("div",{className:"sm:hidden mt-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center justify-center gap-2 px-3 py-3 rounded-lg bg-base-700 hover:bg-base-600 text-xs font-semibold text-white border border-base-600",children:[e.jsx("span",{role:"img","aria-label":"balan√ßa",children:"‚öñÔ∏è"}),e.jsxs("span",{className:"leading-tight text-left",children:["Importar",e.jsx("br",{}),"Balan√ßa"]})]}),s?e.jsx("div",{className:"col-span-2",children:e.jsx(et,{animals:G,stats:Q,areas:m.managementAreas,variant:"compact"})}):e.jsx("div",{className:"col-span-2 text-xs text-yellow-300 border border-yellow-700 rounded px-3 py-2 bg-yellow-900/20 flex items-center justify-center text-center",children:"Configure o Firebase para habilitar exporta√ß√£o."})]})})]}):t==="reports"?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(te,{size:"lg"})}),children:e.jsx(la,{animals:m.animals,focusNFe:v,onNFeHandled:()=>A(!1)})}):t==="calendar"?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(te,{size:"lg"})}),children:e.jsx(ia,{events:m.calendarEvents,onSave:R,onDelete:S})}):t==="tasks"?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(te,{})}),children:e.jsx(oa,{tasks:m.tasks,onAddTask:_,onToggleTask:O,onDeleteTask:x})}):t==="management"?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(te,{size:"lg"})}),children:e.jsx(ca,{animals:m.animals,areas:m.managementAreas,onSaveArea:ne,onDeleteArea:ce,onAssignAnimals:de})}):t==="batches"?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(te,{size:"lg"})}),children:e.jsx(da,{batches:m.batches,animals:m.animals,onCreateBatch:me,onUpdateBatch:ue,onDeleteBatch:he,onCompleteBatch:pe})}):null},ua=o.lazy(()=>U(()=>import("./index-DfYXGMma.js"),__vite__mapDeps([13,10,14,2]))),ha=o.lazy(()=>U(()=>import("./AddAnimalModal-Cs9TF-Uy.js"),__vite__mapDeps([15,10,14,2]))),pa=o.lazy(()=>U(()=>import("./ScaleImportModal-WdfttMK5.js"),__vite__mapDeps([16,2]))),xa=o.lazy(()=>U(()=>import("./Chatbot-BMoM7_Df.js"),__vite__mapDeps([17,10,2]))),ga=({user:t,firebaseReady:s})=>{const{firestore:a,userProfile:n,dashboardConfig:l}=ut(),{state:d,db:c,forceSync:w,syncDelta:v,addAnimal:A,updateAnimal:p,deleteAnimal:f,addOrUpdateCalendarEvent:y,deleteCalendarEvent:m,addTask:_,toggleTaskCompletion:O,deleteTask:x}=a,{role:R,changeRole:S,canAccess:ne,isCapataz:ce,getUserProfile:de}=n,{config:me,toggleWidget:ue,setWidgetSize:he,resetToDefault:pe}=l,[V,G]=o.useState(!1),[Q,J]=o.useState("dashboard"),[re,ae]=o.useState(null),[u,r]=o.useState(!1),[i,g]=o.useState(!1),[h,j]=o.useState(!1),[b,C]=o.useState(!1),[N,M]=o.useState(null),[k,L]=o.useState(null),z=o.useMemo(()=>d.animals.find(D=>D.id===re)||null,[d.animals,re]),F=!!c,P=s&&F&&!!Be;o.useEffect(()=>{if(!c)return;const D=async()=>{await Te.processQueue(c),alert("‚úÖ Dados sincronizados com sucesso!")};return window.addEventListener("sync-offline-data",D),()=>window.removeEventListener("sync-offline-data",D)},[a,c]);const $=D=>{ae(D.id)},Y=async D=>{try{await f(D)}catch{alert("Ocorreu um erro ao excluir o animal.")}},ge=()=>{ae(null)},I=async D=>{try{navigator.onLine?(await A(D),r(!1)):(Te.add({type:"create",collection:"animals",data:{...D,userId:t.uid}}),r(!1),alert("üì± Animal salvo localmente! Ser√° sincronizado quando a internet voltar."))}catch{alert("‚ùå Erro ao adicionar animal")}},T=async(D,K)=>{try{navigator.onLine?await p(D,K):(Te.add({type:"update",collection:"animals",data:{id:D,...K}}),alert("üì± Altera√ß√µes salvas localmente!"))}catch{alert("‚ùå Erro ao atualizar animal")}},oe=()=>{r(!0)},Se=async(D,K,q)=>{try{const se=d.animals.find(ve=>ve.id===D);if(!se)return;const fe={id:`quick-${Date.now()}`,date:new Date,weightKg:K,type:q===H.None?void 0:q},ye=[...se.historicoPesagens||[],fe].sort((ve,Ae)=>new Date(ve.date).getTime()-new Date(Ae.date).getTime());await p(D,{historicoPesagens:ye,pesoKg:K})}catch{alert("‚ùå Erro ao salvar peso")}},pt=async(D,K)=>{try{const q=d.animals.find(ye=>ye.id===D);if(!q)return;const se={id:`med-${Date.now()}`,...K},fe=[...q.historicoSanitario||[],se];await p(D,{historicoSanitario:fe})}catch{alert("‚ùå Erro ao salvar medica√ß√£o")}},xt=async D=>{try{const K=[];D.forEach((q,se)=>{const fe=d.animals.find(Ae=>Ae.id===se);if(!fe)return;const ye={id:`scale-${Date.now()}-${se}`,date:q.date,weightKg:q.weight,type:q.type===H.None?void 0:q.type},ve=[...fe.historicoPesagens||[],ye].sort((Ae,gt)=>new Date(Ae.date).getTime()-new Date(gt.date).getTime());K.push(p(se,{historicoPesagens:ve,pesoKg:q.weight}))}),await Promise.all(K),alert("Pesagens importadas da balan√ßa com sucesso!")}catch{alert("N√£o foi poss√≠vel concluir a importa√ß√£o da balan√ßa.")}};if(o.useEffect(()=>{if(!c)return;const D=window.setInterval(async()=>{navigator.onLine&&await v()===!1&&w()},qt);return()=>window.clearInterval(D)},[w,v,c]),d.loading.animals||d.loading.calendar||d.loading.tasks||d.loading.areas)return e.jsxs("div",{className:"min-h-screen bg-base-900 flex flex-col justify-center items-center text-white",children:[e.jsx(te,{}),e.jsx("p",{className:"mt-4",children:"Carregando dados da fazenda..."}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Carregando do cache local..."})]});if(ce){const D=de();if(D)return e.jsxs(e.Fragment,{children:[e.jsx(Bt,{user:D,tasks:d.tasks,calendarEvents:d.calendarEvents,onAddTask:_,onToggleTask:O,onDeleteTask:x,onAddCalendarEvent:y,onDeleteCalendarEvent:m}),e.jsx("button",{onClick:()=>G(!0),className:"fixed bottom-4 right-4 px-3 py-2 bg-base-700 text-gray-400 rounded-lg text-xs hover:bg-base-600 z-30",children:"üë∑ Trocar Perfil"}),e.jsx(Qe,{currentRole:R,onChangeRole:S,isOpen:V,onClose:()=>G(!1)})]})}return e.jsxs("div",{className:"min-h-screen bg-base-900 font-sans pb-24 md:pb-0",children:[e.jsx(Tt,{currentView:Q,setCurrentView:J,onAddAnimalClick:ne("canEditAnimals")?oe:void 0,user:t,onForceSync:F?w:void 0,lastSync:d.lastSync,userRole:R,onRoleClick:()=>G(!0)}),e.jsxs("main",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[!P&&e.jsxs("div",{className:"mb-4 rounded-lg border border-yellow-700 bg-yellow-900/30 p-3 text-yellow-200 text-sm",children:[e.jsx("p",{className:"font-semibold text-yellow-100",children:"Configura√ß√£o necess√°ria"}),e.jsxs("p",{children:["Para usar exporta√ß√£o e upload, confirme o ",e.jsx("code",{className:"bg-base-800 px-1 rounded",children:"window.__FIREBASE_CONFIG__"})," no",e.jsx("code",{className:"bg-base-800 px-1 rounded ml-1",children:"index.html"})," e garanta que Firestore e Storage estejam ativos."]})]}),e.jsx(ma,{currentView:Q,costlyActionsEnabled:P,setShowDashboardSettings:g,onSelectAnimal:$,onQuickWeight:D=>M(D),onQuickMedication:D=>L(D),onLongPress:D=>ae(D.id),setShowScaleImportModal:j,focusNFePanel:b,setFocusNFePanel:C})]}),e.jsxs(o.Suspense,{fallback:null,children:[e.jsx(ua,{animal:z,isOpen:!!z,onClose:ge,onUpdateAnimal:T,onDeleteAnimal:Y,animals:d.animals,user:t,storageReady:P}),e.jsx(ha,{isOpen:u,onClose:()=>r(!1),onAddAnimal:I,animals:d.animals}),e.jsx(pa,{isOpen:h,onClose:()=>j(!1),animals:d.animals,onImportComplete:xt}),e.jsx(xa,{animals:d.animals})]}),e.jsx(Wt,{isOpen:!!N,onClose:()=>M(null),animal:N,onSave:Se}),e.jsx(Ht,{isOpen:!!k,onClose:()=>L(null),animal:k,onSave:pt}),e.jsx(Mt,{currentView:Q,setCurrentView:J,onAddAnimalClick:ne("canEditAnimals")?oe:void 0}),i&&e.jsx(Ot,{widgets:me.widgets,toggleWidget:ue,setWidgetSize:he,resetToDefault:pe,onClose:()=>g(!1)}),e.jsx(Qe,{currentRole:R,onChangeRole:S,isOpen:V,onClose:()=>G(!1)})]})},fa=t=>e.jsx(aa,{user:t.user,children:e.jsx(ga,{...t})});class ba extends o.Component{constructor(s){super(s),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){const{onError:n,componentName:l}=this.props;this.setState({errorInfo:a}),n&&n(s,a)}render(){const{hasError:s,error:a}=this.state,{children:n,fallback:l}=this.props;return s&&a?typeof l=="function"?l(a,this.handleReset):l||e.jsx("div",{className:"min-h-screen bg-base-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-base-900 border border-base-700 rounded-xl p-8 max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"text-4xl",children:"üòï"}),e.jsx("h2",{className:"text-2xl font-bold text-red-400",children:"Algo deu errado"})]}),e.jsx("p",{className:"text-base-200 mb-2",children:a.message||"Erro desconhecido"}),!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:this.handleReset,className:`flex-1 bg-brand-primary hover:bg-brand-primary-light 
                           text-white font-semibold py-3 px-4 rounded-lg 
                           transition-colors`,children:"Tentar novamente"}),e.jsx("button",{onClick:()=>window.location.reload(),className:`flex-1 bg-base-700 hover:bg-base-600 
                           text-white font-semibold py-3 px-4 rounded-lg 
                           transition-colors`,children:"Recarregar"})]})]})}):n}}const wa=()=>e.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 48 48",children:[e.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),e.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),e.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),e.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C42.022,35.332,44,30.038,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),ya=({onLogin:t,initialError:s})=>{const[a,n]=o.useState(!1),[l,d]=o.useState(s);o.useEffect(()=>{d(s)},[s]);const c=async()=>{n(!0),d(null);try{await t()}catch(w){w.code==="auth/operation-not-allowed"?d("Login com Google n√£o est√° ativado. Por favor, ative-o no seu Console do Firebase em Authentication > Sign-in method."):d("Falha no login. Verifique o console para mais detalhes ou tente novamente."),n(!1)}};return e.jsxs("div",{className:"min-h-screen bg-base-900 flex flex-col justify-center items-center text-white p-8 text-center",children:[e.jsx("img",{src:"/logo.png",alt:"Fazenda+",className:"h-24 w-auto mb-6 cow-logo"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Fazenda+"}),e.jsx("p",{className:"text-base-300 mt-2",children:"Gerencie seu rebanho com intelig√™ncia."}),e.jsxs("div",{className:"mt-12",children:[e.jsxs("button",{onClick:c,disabled:a,className:"inline-flex items-center bg-white text-gray-700 font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-gray-100 transition-colors disabled:opacity-50",children:[a?e.jsx(te,{}):e.jsx(wa,{}),e.jsx("span",{children:"Entrar com Google"})]}),l&&e.jsxs("div",{className:"text-red-400 bg-red-900/30 border border-red-400/50 p-3 rounded-md mt-6 max-w-md mx-auto text-sm",children:[e.jsx("p",{className:"font-bold",children:"Ocorreu um problema"}),e.jsx("p",{children:l})]})]})]})},va=()=>{try{const a="__firebase_auth_test__";window.localStorage.setItem(a,"test"),window.localStorage.removeItem(a)}catch{return{supported:!1,reason:"O Web Storage do seu navegador est√° desativado ou n√£o √© suportado. O sistema de login precisa dele para funcionar. Verifique as configura√ß√µes de privacidade do seu navegador ou tente em uma janela normal."}}const t=["http:","https:","chrome-extension:"],s=window.location.protocol;return t.includes(s)?{supported:!0,reason:null}:{supported:!1,reason:`O protocolo do seu ambiente (${s}) n√£o √© suportado. O aplicativo deve ser executado a partir de um servidor web (http ou https), e n√£o como um arquivo local ('file:').`}},Aa=()=>{const t=window.__FIREBASE_CONFIG__;return t?!t.apiKey||t.apiKey==="YOUR_API_KEY"||!t.projectId?{valid:!1,reason:"A configura√ß√£o do Firebase est√° incompleta. Atualize window.__FIREBASE_CONFIG__ em index.html."}:{valid:!0,reason:null}:{valid:!1,reason:"A configura√ß√£o do Firebase n√£o foi carregada. Verifique a tag <script> em index.html."}},ja=()=>{const[t,s]=o.useState(null),[a,n]=o.useState(!0),[l,d]=o.useState(null),[c,w]=o.useState(null),[v,A]=o.useState(!1);o.useEffect(()=>{let y=!0;const m=va();if(!m.supported){d(m.reason),n(!1);return}const _=Aa();if(!_.valid){w(_.reason),n(!1);return}if(A(!0),!le){w("A configura√ß√£o do Firebase √© inv√°lida ou est√° ausente. O aplicativo n√£o pode se conectar ao banco de dados."),n(!1);return}const O=le.onAuthStateChanged(x=>{if(y){if(x){const R={uid:x.uid,displayName:x.displayName||"Usu√°rio",email:x.email,photoURL:x.photoURL};s(R),w(null)}else s(null);n(!1)}});return()=>{y=!1,O()}},[]);const p=async()=>{if(!le||!Ve)throw new Error("Autentica√ß√£o n√£o inicializada.");await le.signInWithPopup(Ve)},f=y=>{const m=y.includes("protocolo")||y.includes("file:"),_=y.includes("Web Storage");return m?e.jsxs("div",{className:"mt-6 bg-base-800 p-6 rounded-lg text-left max-w-3xl w-full",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"Como Resolver:"}),e.jsxs("p",{className:"text-base-200",children:["Este erro geralmente ocorre ao abrir o arquivo ",e.jsx("code",{className:"bg-base-700 px-1 rounded text-sm",children:"index.html"})," diretamente no navegador. Para que a autentica√ß√£o funcione, o aplicativo precisa ser servido por um servidor web."]}),e.jsx("p",{className:"font-bold text-lg mt-4 mb-2",children:"Op√ß√£o R√°pida (com VS Code):"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-base-200",children:[e.jsxs("li",{children:["Instale a extens√£o ",e.jsx("strong",{className:"text-base-100",children:'"Live Server"'})," no Visual Studio Code."]}),e.jsx("li",{children:"Abra a pasta do projeto no VS Code."}),e.jsxs("li",{children:["Clique com o bot√£o direito no arquivo ",e.jsx("code",{className:"bg-base-700 px-1 rounded text-sm",children:"index.html"})," e selecione ",e.jsx("strong",{className:"text-base-100",children:'"Open with Live Server"'}),"."]}),e.jsxs("li",{children:["Uma nova aba do navegador abrir√° com o endere√ßo correto (come√ßando com ",e.jsx("code",{className:"bg-base-700 px-1 rounded text-sm",children:"http://127.0.0.1..."}),"). Use esta nova aba."]})]})]}):_?e.jsxs("div",{className:"mt-6 bg-base-800 p-6 rounded-lg text-left max-w-3xl w-full",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"Poss√≠veis Causas e Solu√ß√µes:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-base-200",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-base-100",children:"Modo de Navega√ß√£o Privada/An√¥nima:"})," Alguns navegadores bloqueiam o armazenamento de dados. Tente usar uma janela normal."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-base-100",children:"Configura√ß√µes do Navegador:"}),' Verifique se as configura√ß√µes de privacidade (ex: Chrome, Firefox, Safari) n√£o est√£o bloqueando "cookies e dados de sites de terceiros".']}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-base-100",children:"Extens√µes de Navegador:"})," Extens√µes de bloqueio de an√∫ncios ou de privacidade podem desativar o Web Storage. Tente desativ√°-las temporariamente."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-base-100",children:"Navegador Desatualizado:"})," Garanta que seu navegador est√° atualizado para a vers√£o mais recente."]})]})]}):null};if(l)return e.jsxs("div",{className:"min-h-screen bg-base-900 flex flex-col justify-center items-center text-white p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-4",children:"Ambiente Incompat√≠vel"}),e.jsx("p",{className:"max-w-2xl",children:l}),f(l)]});if(a)return e.jsxs("div",{className:"min-h-screen bg-base-900 flex flex-col justify-center items-center text-white",children:[e.jsx(te,{}),e.jsx("p",{className:"mt-4",children:"Autenticando sess√£o..."})]});if(c){const y=c==null?void 0:c.includes("configura√ß√£o do Firebase √© inv√°lida");return e.jsxs("div",{className:"min-h-screen bg-base-900 flex flex-col justify-center items-center text-white p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-4",children:y?"A√ß√£o Necess√°ria: Configura√ß√£o":"Erro de Conex√£o"}),e.jsx("p",{className:"max-w-2xl",children:c||"Ocorreu um erro inesperado. Por favor, recarregue a p√°gina."}),y&&e.jsxs("div",{className:"mt-6 bg-base-800 p-6 rounded-lg text-left max-w-3xl w-full",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"Como resolver:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-base-200",children:[e.jsxs("li",{children:["Acesse o ",e.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-brand-primary-light underline hover:text-brand-primary",children:"Console do Firebase"})," e selecione seu projeto."]}),e.jsxs("li",{children:["Clique no √≠cone de engrenagem (‚öôÔ∏è) e v√° para ",e.jsx("strong",{className:"text-base-100",children:"Configura√ß√µes do Projeto"}),"."]}),e.jsx("li",{children:'Na aba "Geral", role para baixo at√© a se√ß√£o "Seus apps".'}),e.jsxs("li",{children:['Selecione seu app da Web e na se√ß√£o "SDK setup and configuration", escolha a op√ß√£o ',e.jsx("strong",{className:"text-base-100",children:'"Config"'}),"."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-yellow-300",children:"Copie o objeto de configura√ß√£o inteiro"}),", que come√ßa com ",e.jsxs("code",{className:"bg-base-700 px-1 rounded text-sm",children:["const firebaseConfig = ","{"," ... ","}"]}),"."]}),e.jsxs("li",{children:["Abra o arquivo ",e.jsx("code",{className:"bg-base-700 px-1 rounded text-sm",children:"index.html"})," no seu editor de c√≥digo."]}),e.jsxs("li",{children:["Encontre o script que define ",e.jsx("code",{className:"bg-base-700 px-1 rounded text-sm",children:"window.__FIREBASE_CONFIG__"})," e ",e.jsx("strong",{className:"text-yellow-300",children:"substitua o objeto de exemplo INTEIRO"})," pelo que voc√™ copiou do Firebase."]}),e.jsxs("li",{children:["Salve o arquivo e ",e.jsx("strong",{className:"text-base-100",children:"recarregue esta p√°gina"}),"."]})]})]})]})}return t?e.jsx(fa,{user:t,firebaseReady:v}):e.jsx(ya,{onLogin:p,initialError:null})},ht=document.getElementById("root");if(!ht)throw new Error("Could not find root element to mount to");const Na=jt.createRoot(ht);Na.render(e.jsx(yt.StrictMode,{children:e.jsx(ba,{children:e.jsx(ja,{})})}));export{ct as A,Qa as B,ka as C,_t as D,Va as E,Sa as F,Ja as G,Ia as H,$a as I,lt as J,Ua as L,Oa as M,Ra as P,yt as R,Ee as S,_a as T,Fa as U,Ga as V,H as W,nt as X,U as _,za as a,te as b,Ct as c,Xa as d,Pa as e,Za as f,St as g,Vt as h,st as i,e as j,La as k,Zt as l,as as m,Wa as n,Ya as o,Ka as p,Ha as q,o as r,Be as s,qa as t,es as u,Ta as v,Ma as w,Da as x,ts as y,Ba as z};
