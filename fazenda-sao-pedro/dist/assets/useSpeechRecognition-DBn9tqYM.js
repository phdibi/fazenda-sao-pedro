import{r as n}from"./index-OnCL7RT-.js";const m=()=>{const[r,i]=n.useState(!1),[u,a]=n.useState(""),[f,s]=n.useState(null),e=n.useRef(null);n.useEffect(()=>{const c=window.SpeechRecognition||window.webkitSpeechRecognition;if(!c){s("A API de Reconhecimento de Fala não é suportada neste navegador.");return}const t=new c;return t.continuous=!1,t.lang="pt-BR",t.interimResults=!1,t.onresult=o=>{const l=o.results[o.results.length-1];if(l.isFinal){const d=l[0].transcript.trim();a(d)}},t.onerror=o=>{o.error==="no-speech"?s("Nenhuma fala foi detectada. Tente novamente."):s(`Erro no reconhecimento de fala: ${o.error}`),i(!1)},t.onend=()=>{i(!1)},e.current=t,()=>{e.current&&e.current.abort()}},[]);const p=n.useCallback(()=>{if(e.current&&!r){a(""),s(null);try{e.current.start(),i(!0)}catch{s("Não foi possível iniciar o reconhecimento de voz.")}}},[r]),g=n.useCallback(()=>{e.current&&r&&(e.current.stop(),i(!1))},[r]);return{isListening:r,transcript:u,error:f,startListening:p,stopListening:g}};export{m as u};
