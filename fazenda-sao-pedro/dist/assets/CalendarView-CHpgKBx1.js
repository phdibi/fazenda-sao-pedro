import{r as d,j as e,h as E,T as S}from"./index-CkvKbGHG.js";import{C as b}from"./calendar-sEluIg52.js";import"./vendor-CMJYdXG8.js";const k=({event:i})=>{const r={[b.Evento]:"bg-blue-600/80",[b.Observacao]:"bg-yellow-600/80",[b.Compromisso]:"bg-green-600/80"};return e.jsx("div",{className:`p-1 text-[10px] text-white rounded mb-1 cursor-pointer truncate ${r[i.type]}`,children:i.title})},A=({events:i,onSave:r,onDelete:t})=>{const[o,j]=d.useState(new Date),[w,l]=d.useState(!1),[p,c]=d.useState(null),[g,y]=d.useState(null),{month:u,year:f,daysInMonth:N,firstDayOfMonth:v}=d.useMemo(()=>{const s=o.getMonth(),n=o.getFullYear(),x=new Date(n,s+1,0).getDate(),C=new Date(n,s,1).getDay();return{month:s,year:n,daysInMonth:x,firstDayOfMonth:C}},[o]),a=s=>{j(n=>new Date(n.getFullYear(),n.getMonth()+s,1))},h=s=>{y(new Date(f,u,s)),c(null),l(!0)},D=s=>{c(s),y(null),l(!0)},M=()=>{l(!1),c(null),y(null)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Agenda"}),e.jsxs("div",{className:"bg-base-800 p-4 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>a(-1),className:"px-3 py-1 bg-base-700 rounded",children:"<"}),e.jsx("h2",{className:"text-xl font-bold",children:new Intl.DateTimeFormat("pt-BR",{month:"long",year:"numeric"}).format(o)}),e.jsx("button",{onClick:()=>a(1),className:"px-3 py-1 bg-base-700 rounded",children:">"})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-400",children:[["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(s=>e.jsx("div",{className:"p-2",children:s},s)),Array.from({length:v}).map((s,n)=>e.jsx("div",{className:"border border-base-700/50 rounded-md"},`empty-${n}`)),Array.from({length:N}).map((s,n)=>{const x=n+1,C=i.filter(m=>new Date(m.date).getFullYear()===f&&new Date(m.date).getMonth()===u&&new Date(m.date).getDate()===x);return e.jsxs("div",{className:"border border-base-700/50 rounded-md min-h-[100px] p-1 overflow-hidden",children:[e.jsx("div",{className:"font-bold",children:x}),e.jsx("div",{className:"overflow-y-auto max-h-[70px]",children:C.map(m=>e.jsx("div",{onClick:()=>D(m),children:e.jsx(k,{event:m})},m.id))}),e.jsx("button",{onClick:()=>h(x),className:"mt-1 text-xs text-brand-primary-light hover:underline opacity-50 hover:opacity-100 transition-opacity",children:"+"})]},x)})]})]}),e.jsx(T,{isOpen:w,onClose:M,event:p,date:g,onSave:r,onDelete:t})]})},T=({isOpen:i,onClose:r,event:t,date:o,onSave:j,onDelete:w})=>{const[l,p]=d.useState({title:"",type:b.Evento,description:""}),[c,g]=d.useState(new Date),y=a=>{const h=new Date(a);return isNaN(h.getTime())?"":h.toISOString().split("T")[0]};d.useEffect(()=>{t?(p({title:t.title,type:t.type,description:t.description||""}),g(new Date(t.date))):o&&(p({title:"",type:b.Evento,description:""}),g(o))},[t,o,i]);const u=a=>{const{name:h,value:D}=a.target;p(M=>({...M,[h]:D}))},f=a=>{g(new Date(a.target.value+"T00:00:00"))},N=a=>{if(a.preventDefault(),isNaN(c.getTime())){alert("Por favor, insira uma data válida.");return}j({id:t==null?void 0:t.id,date:c,...l}),r()},v=()=>{t&&window.confirm("Tem certeza que deseja excluir este evento?")&&(w(t.id),r())};return e.jsx(E,{isOpen:i,onClose:r,title:t?"Editar Evento":"Adicionar Evento",children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-300",children:"Título"}),e.jsx("input",{type:"text",name:"title",id:"title",value:l.title,onChange:u,className:"mt-1 block w-full bg-base-700 border-base-600 rounded-md shadow-sm p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-300",children:"Data"}),e.jsx("input",{type:"date",name:"date",id:"date",value:y(c),onChange:f,className:"mt-1 block w-full bg-base-700 border-base-600 rounded-md shadow-sm p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-300",children:"Tipo"}),e.jsx("select",{name:"type",id:"type",value:l.type,onChange:u,className:"mt-1 block w-full bg-base-700 border-base-600 rounded-md shadow-sm p-2",children:Object.values(b).map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300",children:"Descrição"}),e.jsx("textarea",{name:"description",id:"description",value:l.description,onChange:u,rows:3,className:"mt-1 block w-full bg-base-700 border-base-600 rounded-md shadow-sm p-2"})]}),e.jsxs("div",{className:"pt-4 flex justify-between",children:[e.jsx("div",{children:t&&e.jsxs("button",{type:"button",onClick:v,className:"bg-red-600 text-white hover:bg-red-700 font-bold py-2 px-4 rounded transition-colors flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"})," Excluir"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-base-700 text-gray-300 hover:bg-base-600 font-bold py-2 px-4 rounded transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"bg-brand-primary hover:bg-brand-primary-light text-white font-bold py-2 px-4 rounded transition-colors",children:"Salvar"})]})]})]})})};export{A as default};
